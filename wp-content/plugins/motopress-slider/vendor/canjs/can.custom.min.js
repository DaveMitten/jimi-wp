/*!
 * CanJS - 2.1.4
 * http://canjs.us/
 * Copyright (c) 2015 Bitovi
 * Tue, 17 Mar 2015 12:18:02 GMT
 * Licensed MIT
 * Includes: can/construct/construct.js,can/compute/compute.js,can/control/control.js,can/construct/super/super.js,can/construct/proxy/proxy.js,can/control/plugin/plugin.js
 * Download from: http://bitbuilder.herokuapp.com/can.custom.js?configuration=jquery&minify=true&plugins=can%2Fconstruct%2Fconstruct.js&plugins=can%2Fcompute%2Fcompute.js&plugins=can%2Fcontrol%2Fcontrol.js&plugins=can%2Fconstruct%2Fsuper%2Fsuper.js&plugins=can%2Fconstruct%2Fproxy%2Fproxy.js&plugins=can%2Fcontrol%2Fplugin%2Fplugin.js
 */
(function(t){var n=function(){var t=window.can||{};("undefined"==typeof GLOBALCAN||GLOBALCAN!==!1)&&(window.can=t),t.k=function(){},t.isDeferred=function(t){return t&&"function"==typeof t.then&&"function"==typeof t.pipe};var n=0;return t.cid=function(t,e){return t._cid||(n++,t._cid=(e||"")+n),t._cid},t.VERSION="@EDGE",t.simpleExtend=function(t,n){for(var e in n)t[e]=n[e];return t},t.frag=function(n){var e;return n&&"string"!=typeof n?11===n.nodeType?n:"number"==typeof n.nodeType?(e=document.createDocumentFragment(),e.appendChild(n),e):"number"==typeof n.length?(e=document.createDocumentFragment(),t.each(n,function(n){e.appendChild(t.frag(n))}),e):(e=t.buildFragment(""+n,document.body),e.childNodes.length||e.appendChild(document.createTextNode("")),e):(e=t.buildFragment(null==n?"":""+n,document.body),e.childNodes.length||e.appendChild(document.createTextNode("")),e)},t.__reading=function(){},t}(),e=function(n){var e=window.setImmediate||function(t){return setTimeout(t,0)},r={MutationObserver:window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,map:{"class":"className",value:"value",innerText:"innerText",textContent:"textContent",checked:!0,disabled:!0,readonly:!0,required:!0,src:function(t,n){return null==n||""===n?(t.removeAttribute("src"),null):(t.setAttribute("src",n),n)},style:function(t,n){return t.style.cssText=n||""}},defaultValue:["input","textarea"],set:function(t,e,i){var o;r.MutationObserver||(o=r.get(t,e));var u,a=(""+t.nodeName).toLowerCase(),s=r.map[e];"function"==typeof s?u=s(t,i):s===!0?(u=t[e]=!0,"checked"===e&&"radio"===t.type&&n.inArray(a,r.defaultValue)>=0&&(t.defaultChecked=!0)):s?(u=t[s]=i,"value"===s&&n.inArray(a,r.defaultValue)>=0&&(t.defaultValue=i)):(t.setAttribute(e,i),u=i),r.MutationObserver||u===o||r.trigger(t,e,o)},trigger:function(r,i,o){return n.data(n.$(r),"canHasAttributesBindings")?e(function(){n.trigger(r,{type:"attributes",attributeName:i,target:r,oldValue:o,bubbles:!1},[])}):t},get:function(t,n){var e=r.map[n];return"string"==typeof e&&t[e]?t[e]:t.getAttribute(n)},remove:function(n,e){var i;r.MutationObserver||(i=r.get(n,e));var o=r.map[e];"function"==typeof o&&o(n,t),o===!0?n[e]=!1:"string"==typeof o?n[o]="":n.removeAttribute(e),r.MutationObserver||null==i||r.trigger(n,e,i)},has:function(){var t=document.createElement("div");return t.hasAttribute?function(t,n){return t.hasAttribute(n)}:function(t,n){return null!==t.getAttribute(n)}}()};return r}(n),r=function(t){return t.addEvent=function(t,n){var e=this.__bindEvents||(this.__bindEvents={}),r=e[t]||(e[t]=[]);return r.push({handler:n,name:t}),this},t.listenTo=function(n,e,r){var i=this.__listenToEvents;i||(i=this.__listenToEvents={});var o=t.cid(n),u=i[o];u||(u=i[o]={obj:n,events:{}});var a=u.events[e];a||(a=u.events[e]=[]),a.push(r),t.bind.call(n,e,r)},t.stopListening=function(n,e,r){var i=this.__listenToEvents,o=i,u=0;if(!i)return this;if(n){var a=t.cid(n);if((o={})[a]=i[a],!i[a])return this}for(var s in o){var c,l=o[s];n=i[s].obj,e?(c={})[e]=l.events[e]:c=l.events;for(var f in c){var d=c[f]||[];for(u=0;d.length>u;)r&&r===d[u]||!r?(t.unbind.call(n,f,d[u]),d.splice(u,1)):u++;d.length||delete l.events[f]}t.isEmptyObject(l.events)&&delete i[s]}return this},t.removeEvent=function(t,n,e){if(!this.__bindEvents)return this;for(var r,i=this.__bindEvents[t]||[],o=0,u="function"==typeof n;i.length>o;)r=i[o],(e?e(r,t,n):u&&r.handler===n||!u&&(r.cid===n||!n))?i.splice(o,1):o++;return this},t.dispatch=function(t,n){var e=this.__bindEvents;if(e){"string"==typeof t&&(t={type:t});var r=t.type,i=(e[r]||[]).slice(0),o=[t];n&&o.push.apply(o,n);for(var u=0,a=i.length;a>u;u++)i[u].handler.apply(this,o);return t}},t.one=function(n,e){var r=function(){return t.unbind.call(this,n,r),e.apply(this,arguments)};return t.bind.call(this,n,r),this},t.event={on:function(){return 0===arguments.length&&t.Control&&this instanceof t.Control?t.Control.prototype.on.call(this):t.addEvent.apply(this,arguments)},off:function(){return 0===arguments.length&&t.Control&&this instanceof t.Control?t.Control.prototype.off.call(this):t.removeEvent.apply(this,arguments)},bind:t.addEvent,unbind:t.removeEvent,delegate:function(n,e,r){return t.addEvent.call(this,e,r)},undelegate:function(n,e,r){return t.removeEvent.call(this,e,r)},trigger:t.dispatch,one:t.one,addEvent:t.addEvent,removeEvent:t.removeEvent,listenTo:t.listenTo,stopListening:t.stopListening,dispatch:t.dispatch},t.event}(n),i=function(t){var n=function(t){var n=t.length;return"function"!=typeof arr&&(0===n||"number"==typeof n&&n>0&&n-1 in t)};return t.each=function(e,r,i){var o,u,a,s=0;if(e)if(n(e))if(t.List&&e instanceof t.List)for(u=e.attr("length");u>s&&(a=e.attr(s),r.call(i||a,a,s,e)!==!1);s++);else for(u=e.length;u>s&&(a=e[s],r.call(i||a,a,s,e)!==!1);s++);else if("object"==typeof e)if(t.Map&&e instanceof t.Map||e===t.route){var c=t.Map.keys(e);for(s=0,u=c.length;u>s&&(o=c[s],a=e.attr(o),r.call(i||a,a,o,e)!==!1);s++);}else for(o in e)if(e.hasOwnProperty(o)&&r.call(i||e[o],e[o],o,e)===!1)break;return e},t}(n),o=function(n){n.inserted=function(e){e=n.makeArray(e);for(var r,i,o=!1,u=n.$(document.contains?document:document.body),a=0;(i=e[a])!==t;a++){if(!o){if(!i.getElementsByTagName)continue;if(!n.has(u,i).length)return;o=!0}if(o&&i.getElementsByTagName){r=n.makeArray(i.getElementsByTagName("*")),n.trigger(i,"inserted",[],!1);for(var s,c=0;(s=r[c])!==t;c++)n.trigger(s,"inserted",[],!1)}}},n.appendChild=function(t,e){var r;r=11===e.nodeType?n.makeArray(e.childNodes):[e],t.appendChild(e),n.inserted(r)},n.insertBefore=function(t,e,r){var i;i=11===e.nodeType?n.makeArray(e.childNodes):[e],t.insertBefore(e,r),n.inserted(i)}}(n),u=function(t,n,e){var r=function(t){return t.nodeName&&(1===t.nodeType||9===t.nodeType)||t==window};t.extend(n,t,{trigger:function(e,i,o,u){r(e)?t.event.trigger(i,o,e,!u):e.trigger?e.trigger(i,o):("string"==typeof i&&(i={type:i}),i.target=i.target||e,o&&(o.length&&"string"==typeof o?o=[o]:o.length||(o=[o])),o||(o=[]),n.dispatch.call(e,i,o))},event:n.event,addEvent:n.addEvent,removeEvent:n.removeEvent,buildFragment:function(n,e){var r;return n=[n],e=e||document,e=!e.nodeType&&e[0]||e,e=e.ownerDocument||e,r=t.buildFragment(n,e),r.cacheable?t.clone(r.fragment):r.fragment||r},$:t,each:n.each,bind:function(e,i){return this.bind&&this.bind!==n.bind?this.bind(e,i):r(this)?t.event.add(this,e,i):n.addEvent.call(this,e,i),this},unbind:function(e,i){return this.unbind&&this.unbind!==n.unbind?this.unbind(e,i):r(this)?t.event.remove(this,e,i):n.removeEvent.call(this,e,i),this},delegate:function(e,i,o){return this.delegate?this.delegate(e,i,o):r(this)?t(this).delegate(e,i,o):n.bind.call(this,i,o),this},undelegate:function(e,i,o){return this.undelegate?this.undelegate(e,i,o):r(this)?t(this).undelegate(e,i,o):n.unbind.call(this,i,o),this},proxy:function(t,n){return function(){return t.apply(n,arguments)}},attr:e}),n.on=n.bind,n.off=n.unbind,t.each(["append","filter","addClass","remove","data","get","has"],function(t,e){n[e]=function(t){return t[e].apply(t,n.makeArray(arguments).slice(1))}});var i=t.cleanData;t.cleanData=function(e){t.each(e,function(t,e){e&&n.trigger(e,"removed",[],!1)}),i(e)};var o,u=t.fn.domManip;if(t.fn.domManip=function(){for(var t=1;arguments.length>t;t++)if("function"==typeof arguments[t]){o=t;break}return u.apply(this,arguments)},t(document.createElement("div")).append(document.createElement("div")),t.fn.domManip=2===o?function(t,e,r){return u.call(this,t,e,function(t){var e;11===t.nodeType&&(e=n.makeArray(t.childNodes));var i=r.apply(this,arguments);return n.inserted(e?e:[t]),i})}:function(t,e){return u.call(this,t,function(t){var r;11===t.nodeType&&(r=n.makeArray(t.childNodes));var i=e.apply(this,arguments);return n.inserted(r?r:[t]),i})},n.attr.MutationObserver)t.event.special.attributes={setup:function(){var t=this,e=new n.attr.MutationObserver(function(e){e.forEach(function(e){var r=n.simpleExtend({},e);n.trigger(t,r,[])})});e.observe(this,{attributes:!0,attributeOldValue:!0}),n.data(n.$(this),"canAttributesObserver",e)},teardown:function(){n.data(n.$(this),"canAttributesObserver").disconnect(),t.removeData(this,"canAttributesObserver")}};else{var a=t.attr;t.attr=function(t,e){var r,i;arguments.length>=3&&(r=a.call(this,t,e));var o=a.apply(this,arguments);return arguments.length>=3&&(i=a.call(this,t,e)),i!==r&&n.attr.trigger(t,e,r),o};var s=t.removeAttr;t.removeAttr=function(t,e){var r=a.call(this,t,e),i=s.apply(this,arguments);return null!=r&&n.attr.trigger(t,e,r),i},t.event.special.attributes={setup:function(){n.data(n.$(this),"canHasAttributesBindings",!0)},teardown:function(){t.removeData(this,"canHasAttributesBindings")}}}return function(){var t="<-\n>",e=n.buildFragment(t,document);if(t!==e.childNodes[0].nodeValue){var r=n.buildFragment;n.buildFragment=function(t,n){var e=r(t,n);return 1===e.childNodes.length&&3===e.childNodes[0].nodeType&&(e.childNodes[0].nodeValue=t),e}}}(),t.event.special.inserted={},t.event.special.removed={},n}(jQuery,n,e,r,i,o),a=function(n){var e=/_|-/,r=/\=\=/,i=/([A-Z]+)([A-Z][a-z])/g,o=/([a-z\d])([A-Z])/g,u=/([a-z\d])([A-Z])/g,a=/\{([^\}]+)\}/g,s=/"/g,c=/'/g,l=/-+(.)?/g,f=/[a-z][A-Z]/g,d=function(n,e,r){var i=n[e];return i===t&&r===!0&&(i=n[e]={}),i},p=function(t){return/^f|^o/.test(typeof t)},h=function(n){var e=null===n||n===t||isNaN(n)&&"NaN"==""+n;return""+(e?"":n)};return n.extend(n,{esc:function(t){return h(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(s,"&#34;").replace(c,"&#39;")},getObject:function(e,r,i){var o,u,a,s,c=e?e.split("."):[],l=c.length,f=0;if(r=n.isArray(r)?r:[r||window],s=r.length,!l)return r[0];for(f;s>f;f++){for(o=r[f],a=t,u=0;l>u&&p(o);u++)a=o,o=d(a,c[u]);if(a!==t&&o!==t)break}if(i===!1&&o!==t&&delete a[c[u-1]],i===!0&&o===t)for(o=r[0],u=0;l>u&&p(o);u++)o=d(o,c[u],!0);return o},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},camelize:function(t){return h(t).replace(l,function(t,n){return n?n.toUpperCase():""})},hyphenate:function(t){return h(t).replace(f,function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()})},underscore:function(t){return t.replace(r,"/").replace(i,"$1_$2").replace(o,"$1_$2").replace(u,"_").toLowerCase()},sub:function(e,r,i){var o=[];return e=e||"",o.push(e.replace(a,function(e,u){var a=n.getObject(u,r,i===!0?!1:t);return a===t||null===a?(o=null,""):p(a)&&o?(o.push(a),""):""+a})),null===o?o:1>=o.length?o[0]:o},replacer:a,undHash:e}),n}(u),s=function(n){var e=0,r=function(t,n){var e=Object.getOwnPropertyDescriptor(t,n);return e&&(e.get||e.set)?e:null},i=function(t,e,i){i=i||t;var o;for(var u in t)(o=r(t,u))?this._defineProperty(i,e,u,o):n.Construct._overwrite(i,e,u,t[u])},o=function(t,e,r){r=r||t;for(var i in t)n.Construct._overwrite(r,e,i,t[i])};return n.Construct=function(){return arguments.length?n.Construct.extend.apply(n.Construct,arguments):t},n.extend(n.Construct,{constructorExtends:!0,newInstance:function(){var t,n=this.instance();return n.setup&&(t=n.setup.apply(n,arguments)),n.init&&n.init.apply(n,t||arguments),n},_inherit:Object.getOwnPropertyDescriptor?i:o,_defineProperty:function(t,n,e,r){Object.defineProperty(t,e,r)},_overwrite:function(t,n,e,r){t[e]=r},setup:function(t){this.defaults=n.extend(!0,{},t.defaults,this.defaults)},instance:function(){e=1;var t=new this;return e=0,t},extend:function(r,i,o){function u(){return e?t:this.constructor!==u&&arguments.length&&u.constructorExtends?u.extend.apply(u,arguments):u.newInstance.apply(u,arguments)}var a=r,s=i,c=o;"string"!=typeof a&&(c=s,s=a,a=null),c||(c=s,s=null),c=c||{};var l,f,d,p,h,v,g,m,b=this,y=this.prototype;m=this.instance(),n.Construct._inherit(c,y,m);for(h in b)b.hasOwnProperty(h)&&(u[h]=b[h]);n.Construct._inherit(s,b,u),a&&(l=a.split("."),v=l.pop(),f=n.getObject(l.join("."),window,!0),g=f,d=n.underscore(a.replace(/\./g,"_")),p=n.underscore(v),f[v]=u),n.extend(u,{constructor:u,prototype:m,namespace:g,_shortName:p,fullName:a,_fullName:d}),v!==t&&(u.shortName=v),u.prototype.constructor=u;var _=[b].concat(n.makeArray(arguments)),C=u.setup.apply(u,_);return u.init&&u.init.apply(u,C||_),u}}),n.Construct.prototype.setup=function(){},n.Construct.prototype.init=function(){},n.Construct}(a),c=function(t){return t.bindAndSetup=function(){return t.addEvent.apply(this,arguments),this._init||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup())),this},t.unbindAndTeardown=function(){return t.removeEvent.apply(this,arguments),null===this._bindings?this._bindings=0:this._bindings--,!this._bindings&&this._bindteardown&&this._bindteardown(),this},t}(u),l=function(t){var n=1,e=0,r=[],i=[];t.batch={start:function(t){e++,t&&i.push(t)},stop:function(o,u){if(o?e=0:e--,0===e){var a,s,c=r.slice(0),l=i.slice(0);for(r=[],i=[],n++,u&&t.batch.start(),a=0,s=c.length;s>a;a++)t.dispatch.apply(c[a][0],c[a][1]);for(a=0,s=l.length;l.length>a;a++)l[a]()}},trigger:function(i,o,u){if(!i._init){if(0===e)return t.dispatch.call(i,o,u);o="string"==typeof o?{type:o}:o,o.batchNum=n,r.push([i,[o,u]])}}}}(n);(function(n){var e=[];n.__read=function(t,n){e.push({});var r=t.call(n);return{value:r,observed:e.pop()}},n.__reading=function(t,n){e.length&&(e[e.length-1][t._cid+"|"+n]={obj:t,event:n+""})},n.__clearReading=function(){if(e.length){var t=e[e.length-1];return e[e.length-1]={},t}},n.__setReading=function(t){e.length&&(e[e.length-1]=t)},n.__addReading=function(t){e.length&&n.simpleExtend(e[e.length-1],t)};var r=function(t,e,r,o){var a=n.__read(t,e),s=a.observed;return i(r,s,o),u(r,o),a},i=function(t,n,e){for(var r in n)o(t,n,r,e)},o=function(t,n,e,r){if(t[e])delete t[e];else{var i=n[e];i.obj.bind(i.event,r)}},u=function(t,n){for(var e in t){var r=t[e];r.obj.unbind(r.event,n)}},a=function(t,e,r,i){e!==r&&n.batch.trigger(t,i?{type:"change",batchNum:i}:"change",[e,r])},s=function(e,i,o,u){var a,s,c;return{on:function(l){s||(s=function(n){if(e.bound&&(n.batchNum===t||n.batchNum!==c)){var u=a.value;a=r(i,o,a.observed,s),l(a.value,u,n.batchNum),c=c=n.batchNum}}),a=r(i,o,{},s),u(a.value),e.hasDependencies=!n.isEmptyObject(a.observed)},off:function(){for(var t in a.observed){var n=a.observed[t];n.obj.unbind(n.event,s)}}}},c=function(e,i,o,u){var a,s,c,l;return{on:function(f){c||(c=function(r){if(e.bound&&(r.batchNum===t||r.batchNum!==l)){var u=n.__clearReading(),a=i.call(o);n.__setReading(u),f(a,s,r.batchNum),s=a,l=l=r.batchNum}}),a=r(i,o,{},c),s=a.value,u(a.value),e.hasDependencies=!n.isEmptyObject(a.observed)},off:function(){for(var t in a.observed){var n=a.observed[t];n.obj.unbind(n.event,c)}}}},l=function(t){return t instanceof n.Map||t&&t.__get},f=function(){};n.compute=function(r,i,o,u){if(r&&r.isComputed)return r;for(var l,d,p,h=f,v=f,g=function(){return d},m=function(t){d=t},b=m,y=[],_=function(t,n,e){b(t),a(l,t,n,e)},C=0,E=arguments.length;E>C;C++)y[C]=arguments[C];if(l=function(r){if(arguments.length){var o=d,u=m.call(i,r,o);return l.hasDependencies?g.call(i):(d=u===t?g.call(i):u,a(l,d,o),d)}return e.length&&l.canReadForChangeEvent!==!1&&(n.__reading(l,"change"),l.bound||n.compute.temporarilyBind(l)),l.bound?d:g.call(i)},"function"==typeof r){m=r,g=r,l.canReadForChangeEvent=o===!1?!1:!0;var A=u?c(l,r,i||this,b):s(l,r,i||this,b);h=A.on,v=A.off}else if(i)if("string"==typeof i){var w=i,N=r instanceof n.Map;if(N){l.hasDependencies=!0;var O;g=function(){return r.attr(w)},m=function(t){r.attr(w,t)},h=function(t){O=function(n,e,r){t(e,r,n.batchNum)},r.bind(o||w,O),d=n.__read(g).value},v=function(){r.unbind(o||w,O)}}else g=function(){return r[w]},m=function(t){r[w]=t},h=function(t){O=function(){t(g(),d)},n.bind.call(r,o||w,O),d=n.__read(g).value},v=function(){n.unbind.call(r,o||w,O)}}else if("function"==typeof i)d=r,m=i,i=o,p="setter";else{d=r;var x=i,T=_;if(i=x.context||x,g=x.get||g,m=x.set||function(){return d},x.fn){var j,k=x.fn;g=function(){return k.call(i,d)},0===k.length?j=s(l,k,i,b):1===k.length?j=s(l,function(){return k.call(i,d)},i,b):(_=function(n){n!==t&&T(n,d)},j=s(l,function(){var n=k.call(i,d,function(t){T(t,d)});return n!==t?n:d},i,b)),h=j.on,v=j.off}else _=function(){var t=g.call(i);T(t,d)};h=x.on||h,v=x.off||v}else d=r;return n.cid(l,"compute"),n.simpleExtend(l,{isComputed:!0,_bindsetup:function(){this.bound=!0;var t=n.__clearReading();h.call(this,_),n.__setReading(t)},_bindteardown:function(){v.call(this,_),this.bound=!1},bind:n.bindAndSetup,unbind:n.unbindAndTeardown,clone:function(t){return t&&("setter"===p?y[2]=t:y[1]=t),n.compute.apply(n,y)}})};var d,p=function(){for(var t=0,n=d.length;n>t;t++)d[t].unbind("change",f);d=null};return n.compute.temporarilyBind=function(t){t.bind("change",f),d||(d=[],setTimeout(p,10)),d.push(t)},n.compute.truthy=function(t){return n.compute(function(){var n=t();return"function"==typeof n&&(n=n()),!!n})},n.compute.async=function(t,e,r){return n.compute(t,{fn:e,context:r})},n.compute.read=function(e,r,i){i=i||{};for(var o,u,a,s=e,c=0,f=r.length;f>c;c++)if(u=s,u&&u.isComputed&&(i.foundObservable&&i.foundObservable(u,c),u=s=u()),l(u)?(!a&&i.foundObservable&&i.foundObservable(u,c),a=1,s="function"==typeof u[r[c]]&&u.constructor.prototype[r[c]]===u[r[c]]?i.returnObserveMethods?s[r[c]]:"constructor"===r[c]&&u instanceof n.Construct||u[r[c]].prototype instanceof n.Construct?u[r[c]]:u[r[c]].apply(u,i.args||[]):s.attr(r[c])):s=null==s?t:u[r[c]],o=typeof s,s&&s.isComputed&&!i.isArgument&&f-1>c?(!a&&i.foundObservable&&i.foundObservable(u,c+1),s=s()):r.length-1>c&&"function"===o&&i.executeAnonymousFunctions&&!(n.Construct&&s.prototype instanceof n.Construct)&&(s=s()),r.length-1>c&&(null===s||"function"!==o&&"object"!==o))return i.earlyExit&&i.earlyExit(u,c,s),{value:t,parent:u};return"function"!=typeof s||n.Construct&&s.prototype instanceof n.Construct||n.route&&s===n.route||(i.isArgument?s.isComputed||i.proxyMethods===!1||(s=n.proxy(s,u)):(s.isComputed&&!a&&i.foundObservable&&i.foundObservable(s,c),s=s.call(u))),s===t&&i.earlyExit&&i.earlyExit(u,c-1),{value:s,parent:u}},n.compute.set=function(n,e,r){return l(n)?n.attr(e,r):n[e]&&n[e].isComputed?n[e](r):("object"==typeof n&&(n[e]=r),t)},n.compute})(u,c,l);var f=function(n){var e,r=function(t,e,r){return n.bind.call(t,e,r),function(){n.unbind.call(t,e,r)}},i=n.isFunction,o=n.extend,u=n.each,a=[].slice,s=/\{([^\}]+)\}/g,c=n.getObject("$.event.special",[n])||{},l=function(t,e,r,i){return n.delegate.call(t,e,r,i),function(){n.undelegate.call(t,e,r,i)}},f=function(t,e,i,o){return o?l(t,n.trim(o),e,i):r(t,e,i)},d=n.Control=n.Construct({setup:function(){if(n.Construct.setup.apply(this,arguments),n.Control){var t,e=this;e.actions={};for(t in e.prototype)e._isAction(t)&&(e.actions[t]=e._action(t))}},_shifter:function(t,e){var r="string"==typeof e?t[e]:e;return i(r)||(r=t[r]),function(){return t.called=e,r.apply(t,[this.nodeName?n.$(this):this].concat(a.call(arguments,0)))}},_isAction:function(t){var n=this.prototype[t],e=typeof n;return"constructor"!==t&&("function"===e||"string"===e&&i(this.prototype[n]))&&!!(c[t]||p[t]||/[^\w]/.test(t))},_action:function(r,i){if(s.lastIndex=0,i||!s.test(r)){var o=i?n.sub(r,this._lookup(i)):r;if(!o)return null;var u=n.isArray(o),a=u?o[1]:o,c=a.split(/\s+/g),l=c.pop();return{processor:p[l]||e,parts:[a,c.join(" "),l],delegate:u?o[0]:t}}},_lookup:function(t){return[t,window]},processors:{},defaults:{}},{setup:function(t,e){var r,i=this.constructor,u=i.pluginName||i._fullName;return this.element=n.$(t),u&&"can_control"!==u&&this.element.addClass(u),r=n.data(this.element,"controls"),r||(r=[],n.data(this.element,"controls",r)),r.push(this),this.options=o({},i.defaults,e),this.on(),[this.element,this.options]},on:function(e,r,i,o){if(!e){this.off();var u,a,s=this.constructor,c=this._bindings,l=s.actions,d=this.element,p=n.Control._shifter(this,"destroy");for(u in l)l.hasOwnProperty(u)&&(a=l[u]||s._action(u,this.options,this),a&&(c.control[u]=a.processor(a.delegate||d,a.parts[2],a.parts[1],u,this)));return n.bind.call(d,"removed",p),c.user.push(function(t){n.unbind.call(t,"removed",p)}),c.user.length}return"string"==typeof e&&(o=i,i=r,r=e,e=this.element),o===t&&(o=i,i=r,r=null),"string"==typeof o&&(o=n.Control._shifter(this,o)),this._bindings.user.push(f(e,i,o,r)),this._bindings.user.length},off:function(){var t=this.element[0],n=this._bindings;n&&(u(n.user||[],function(n){n(t)}),u(n.control||{},function(n){n(t)})),this._bindings={user:[],control:{}}},destroy:function(){if(null!==this.element){var t,e=this.constructor,r=e.pluginName||e._fullName;this.off(),r&&"can_control"!==r&&this.element.removeClass(r),t=n.data(this.element,"controls"),t.splice(n.inArray(this,t),1),n.trigger(this,"destroyed"),this.element=null}}}),p=n.Control.processors;return e=function(t,e,r,i,o){return f(t,e,n.Control._shifter(o,i),r)},u(["change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave","inserted","removed"],function(t){p[t]=e}),d}(u,s);(function(t){var n=t.isFunction,e=/xyz/.test(function(){return this.xyz})?/\b_super\b/:/.*/,r=["get","set"],i=function(t,n,e){return function(){var r,i=this._super;return this._super=t[n],r=e.apply(this,arguments),this._super=i,r}};return t.Construct._defineProperty=function(e,o,u,a){var s=Object.getOwnPropertyDescriptor(o,u);s&&t.each(r,function(t){n(s[t])&&n(a[t])?a[t]=i(s,t,a[t]):n(a[t])||(a[t]=s[t])}),Object.defineProperty(e,u,a)},t.Construct._overwrite=function(t,r,o,u){t[o]=n(u)&&n(r[o])&&e.test(u)?i(r,o,u):u},t})(u,s),function(t){var n=(t.isFunction,t.isArray),e=t.makeArray,r=function(t){var r,i=e(arguments);return t=i.shift(),n(t)||(t=[t]),r=this,function(){for(var o,u,a=i.concat(e(arguments)),s=t.length,c=0;s>c;c++)u=t[c],u&&(o="string"==typeof u,a=(o?r[u]:u).apply(r,a||[]),s-1>c&&(a=!n(a)||a._use_call?[a]:a));return a}};t.Construct.proxy=t.Construct.prototype.proxy=r;for(var i=[t.Map,t.Control,t.Model],o=0;i.length>o;o++)i[o]&&(i[o].proxy=r);return t}(u,s),function(n,e){var r,i=function(t,n){var e=t.constructor.pluginName||t.constructor._shortName;for(r=0;n.length>r;r++)if("string"==typeof n[r]?e===n[r]:t instanceof n[r])return!0;return!1},o=e.makeArray,u=e.Control.setup;return e.Control.setup=function(){if(this!==e.Control){var t=this.pluginName||this._fullName;"can_control"!==t&&this.plugin(t),u.apply(this,arguments)}},n.fn.extend({controls:function(){var t,n,r=o(arguments),u=[];return this.each(function(){if(t=e.$(this).data("controls"))for(var o=0;t.length>o;o++)n=t[o],(!r.length||i(n,r))&&u.push(n)}),u},control:function(){return this.controls.apply(this,arguments)[0]}}),e.Control.plugin=function(r){var i=this;n.fn[r]||(n.fn[r]=function(r){var u,a=o(arguments),s="string"==typeof r&&n.isFunction(i.prototype[r]),c=a[0];return this.each(function(){var t=e.$(this).control(i);t?s?u=t[c].apply(t,a.slice(1)):t.update.apply(t,a):i.newInstance.apply(i,[this].concat(a))}),u!==t?u:this})},e.Control.prototype.update=function(t){e.extend(this.options,t),this.on()},e}(jQuery,u,f),window.can=n})();
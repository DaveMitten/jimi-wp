"use strict";!function(){function a(){}function b(b,d){var e=angular.element(b).offset().top+angular.element(b).outerHeight(),f=angular.element(window).scrollTop()+angular.element(window).height();f>=e&&!c&&(angular.element(window).unbind("scroll"),a.bootstrapSlider(b,d),c=!0)}var c=!1;a.prototype.getSliderManager=function(a){if(a){var b=angular.element(a).children(".ms_wrapper");if(b.length)return b.scope().SliderManager}return null},a.prototype.initSlider=function(d){var e=angular.element(d).children(".motoslider").find("#settings"),f=e.data("scrollInit"),g=e.data("delayInit"),h=angular.isDefined(e.data("edit-mode"))?e.data("edit-mode"):!1;f&&!h?(c=!1,b(d,g),angular.element(window).scroll(function(){b(d,g)})):a.bootstrapSlider(d,g)},a.bootstrapSlider=function(a,b){if(b)var c=setTimeout(function(){d(a),clearTimeout(c)},b);else d(a)};var d=function(a){if(angular.isUndefined(angular.element(a).scope())){var b=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=angular.element(a).children(".motoslider").find("#settings"),d=angular.isDefined(c.data("edit-mode"))?c.data("edit-mode"):!1,e=angular.isDefined(c.data("visible-from"))&&""!==c.data("visible-from")?c.data("visible-from"):null,f=angular.isDefined(c.data("visible-till"))&&""!==c.data("visible-till")?c.data("visible-till"):null;d||null===e&&null===f||null===e&&f>=b||null===f&&b>=e||b>=e&&f>=b?angular.bootstrap(a,["motosliderApp"]):angular.element(a).addClass("motoslider-hide")}};window.MPSLManager=new a}(),angular.module("templates-main",["../app/views/MsTemplate.html"]),angular.module("../app/views/MsTemplate.html",[]).run(["$templateCache",function(a){a.put("../app/views/MsTemplate.html","<div data-scope='{{ id }}' ms-slider ms-resize id=\"{{ $id }}\" ng-cloak\n     ng-class=\"['ms_wrapper', 'ms_to_right', 'turnApply', 'applySlides', data.settings.customClass]\"\n     data-ng-init=\"initSlider()\" ms-swipe>\n"+'    <div ms-repeater ng-repeat="slide in data.slides track by $index" ng-show="isCurrentIndex($index)"\n         data-current-index="{{$index}}" class="ms_slide ms_repeater ms_optimize" id="{{slide.general.id}}"\n         ng-class="[isCurrentIndexFirst($index) && \'ms_current_slide ms_show\', isCurrentIndexFirst($index) && data.defaults.animatedClass, slide.general.classes]">\n        <a ng-if="slide.general.link.length" href="{{slide.general.link}}"\n           class="ms_slide_link {{slide.general.link_class}}" id="{{slide.general.link_id}}"\n           rel="{{slide.general.link_rel}}" target="{{slide.general.link_target}}"\n           title="{{slide.general.link_title}}"></a>\n\n        <div class="ms_slide_wrapper" ms-slide>\n\n            <div class="ms_color" ng-if="isSlideBgType(\'color\')" ms-slide-color ng-style="getStyles()"></div>\n\n            <div class="ms_gradient" ng-if="isSlideBgType(\'gradient\')" ms-slide-gradient ng-style="getStyles()"></div>\n\n            <div class="ms_image" ng-if="isSlideBgType(\'image\')" ms-slide-image ng-style="getStyles()"></div>\n\n            <div class="ms_video_background" ng-if="isSlideBgType(\'video\') && !detectMobile" ms-slide-video\n                 ng-style="getStyles()"></div>\n            <!--            <div class="ms_video_background" ng-if="isSlideBgType(\'video\')">\n                            <video ms-slide-video ng-if="slide.backgrounds.video.showVideo" ng-style="getStyles()" preload>\n                                <source ng-repeat="s in slide.backgrounds.video.sources" ng-src="{{ getSrc(s)}}" type="{{ getType(s)}}" />\n                            </video>\n                        </div>-->\n\n            <!--<iframe class="ms_youtube" ms-slide-youtube ng-style="getStyles()" frameborder="0" allowscriptaccess="always"></iframe>-->\n\n            <!--<div class="ms_parallax_wrapper" ng-if="isSlideParallax(slide)" >-->\n            <!--<div ms-slide-parallax class="ms_parallax"  ng-if="isSlideParallax(slide)" data-jkit="[parallax:strength=1;axis=both;detect=mousemove;scope=local;]"  ng-style="getStyles()">-->\n            <!--<div  data-ng-repeat="p in slide.parallaxSettings.parallaxLayers"  ng-bind-html="p.content | parallaxValidate" class="ms_parallax" data-ng-class="{ {{p.class}} : true }" ms-size="{{p.size}}" ms-resize-parallax-element ></div>-->\n            <!--</div>-->\n            <!--</div>-->\n\n        </div>\n\n        <div class="layers" ng-repeat="(layerKey, layer) in slide.layers " ng-style="{\'z-index\' : \'{{layerKey + 100}}\'}">\n            <!--<div class="layers" ng-repeat="layer in slide.layers" >-->\n            <a ng-if="isLayerType(\'image\') && (layer.link || data.settings.editMode)" class="ms_layer ms_image_layer"\n               ms-resize-current ms-image-layer ms-layer>\n                <img/>\n            </a>\n            <img ng-if="isLayerType(\'image\') && !layer.link && !data.settings.editMode" class="ms_layer ms_image_layer"\n                 ms-resize-current ms-image-layer ms-layer />\n\n            <a ng-if="isLayerType(\'button\')" class="ms_layer ms_button_layer" ms-resize-current ms-button-layer\n               ms-layer></a>\n\n            <div ng-if="isLayerType(\'video\') && disableMobileCheck(layer.disableMobile)" ms-video-layer ms-layer\n                 ng-style="getStyles()" class="ms_layer ms_video_layer" ms-resize-current>\n                <video preload="true">\n                </video>\n            </div>\n            <div ng-if="isLayerType(\'youtube\') && disableMobileCheck(layer.disableMobile)" ms-youtube-layer ms-layer\n                 class="ms_layer ms_youtube_layer" ms-resize-current ng-style="getStyles()">\n                <iframe id="{{ $id }}"></iframe>\n                <div ng-if="layer.preview_image.length" class="ms_youtube_layer_preview_image"\n                     ng-style="{\'background-image\':\'url(\\\'\' + layer.preview_image + \'\\\')\'}">\n                    <div class="ms_youtube_layer_preview_button" ng-click="clickPreviewButton()"></div>\n                </div>\n            </div>\n            <!-- <iframe ng-if="isLayerYoutube(layer)" ms-youtube-layer class="ms_layer ms_youtube_layer" ms-resize-current ng-style="getStyles()" ></iframe> -->\n            <!--<iframe ng-if="isLayerVimeo(layer)" ms-vimeo-layer ng-style="getStyles()" class="ms_layer ms_vimeo_layer" ms-resize-current></iframe>-->\n            <div ng-if="isLayerType(\'vimeo\') && disableMobileCheck(layer.disableMobile)" ms-vimeo-layer ms-layer\n                 ng-style="getStyles()" class="ms_layer ms_vimeo_layer" ms-resize-current>\n                <iframe></iframe>\n                <div ng-if="layer.preview_image.length" class="ms_vimeo_layer_preview_image"\n                     ng-style="{\'background-image\':\'url(\\\'\' + layer.preview_image + \'\\\')\'}">\n                    <div class="ms_vimeo_layer_preview_button" ng-click="clickPreviewButton()"></div>\n                </div>\n            </div>\n            <div ng-if="isLayerType(\'html\')" class="ms_layer ms_html_layer" data-ng-bind-html="layer.content"\n                 ms-resize-current ms-html-layer ms-layer ></div>\n        </div>\n    </div>\n    <div class="ms_counter mpsl-controls-show-hide" ng-show="isCounter()  && sliderMouseEnter">\n        <span ms-counter></span>\n    </div>\n    <div class="ms_pagination mpsl-controls-show-hide ms_control_show" ng-show="showPagination() && sliderMouseEnter">\n        <div class="ms_bullet_wrapper">\n            <a ng-repeat="slide in data.slides" href="javascript:void(0)" class="ms_bullet "\n               ng-class="{ ms_active : isCurrentIndex($index) }" ng-click="changeSlideManualy($index)"\n               index="{{ $index}}" ms-pagination>\n                <div ng-class="{ms_thumbnail : data.settings.thumbnails}">\n                    <div></div>\n                </div>\n            </a>\n        </div>\n    </div>\n    <div class="ms_arrows">\n        <a href="javascript:void(0)" class="ms_prev mpsl-controls-show-hide"\n           ng-show="data.settings.arrowsShow && sliderMouseEnter" ms-prev></a>\n        <a href="javascript:void(0)" class="ms_next mpsl-controls-show-hide"\n           ng-show="data.settings.arrowsShow && sliderMouseEnter" ms-next></a>\n        <a href="javascript:void(0)" class="ms_start_pause mpsl-controls-show-hide"\n           ng-show="!data.settings.hoverTimer && data.settings.slideshowPPBShow && disableMobileCheck(true) && sliderMouseEnter"\n           ms-start-pause></a>\n        <!-- <div id="ms_timer_container"></div> -->\n        <div class="ms_banner_timer" ng-show="::data.settings.slideshowTimerShow">\n            <div class="ms_banner_inner"></div>\n        </div>\n    </div>\n    <div class="ms_preload_wrapper ms_active"></div>\n</div>\n\n\n')}]),angular.module("motosliderApp",["ngAnimate","ngTouch","templates-main"]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/)}]),angular.element(document).ready(function(){angular.element(".motoslider_wrapper").each(function(){MPSLManager.initSlider(this)})}),angular.module("motosliderApp").constant("jsonFile","motoslider.json"),angular.module("motosliderApp").factory("detectMobileDevice",function(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0),a}),angular.module("motosliderApp").factory("grid",function(){return{defaultWidth:960,defaultHeight:350}}),angular.module("motosliderApp").factory("bgImageSettings",function(){return{defaultFit:"cover",defaultPosition:"center top",defaultRepeat:"no-repeat",defaultFitPercentage:{x:100,y:100},defaultPositionPercentage:{x:0,y:0}}}),angular.module("motosliderApp").constant("defaults",{sliderSettings:{customClass:"",arrowsShow:!0,thumbnailsShow:!0,slideshowTimerShow:!0,slideshowPPBShow:!0,controlsHideOnLeave:!1,visibleFrom:null,visibleTill:null},allWidth:window.innerWidth,height:800,heightYoutube:250,widthYoutube:400,heightVimeo:250,widthVimeo:400,slideAnimation:"bounceIn",timer:!1,timerDelay:5e3,timerReverse:!1,counter:!1,fullWindowResize:!1,showThumbnails:!1,slideEnterAnimation:"msSlide",slideLeaveAnimation:"msSlide",slideDuration:1e3,slideEasing:"linear",layerDelay:500,layerAnimation:"fadeIn",bgColorSlide:"#c3c3c3",layerWidth:350,layerHeight:250,settingsYoutubeSlide:{controls:!1},hoverTimer:!1,startSlide:0,slideDelay:1500,leaveEventNamesArr:["webkitAnimationEnd","animationend","MSAnimationEnd","oanimationend"],info:"undefined"==typeof MPSLCore?{path:"",version:"1.1.8"}:MPSLCore,animatedClass:"mpsl-animated",animationClassPrefix:"mpsl-",layerShowClass:"mpsl-layer-show",layerHideClass:"mpsl-layer-hide",videoBackground:"images/default-video.png",magicRedrawDelay:550,bannerDelay:1300,swipe:!0,animationDuration:1e3,animationLeaveDuration:1e3,animationTimingFunction:"mpsl-linear",animationLeaveTimingFunction:"mpsl-linear",swipeTimeLimit:700,swipeTransitionDuration:700,swipeWidthLimit:4,swipeTime:300,scrollInit:!1,delayInit:0}),angular.module("motosliderApp").factory("defaultSettingsSlide",function(){return{"class":"",id:"",link:"",link_target:"_blank",link_id:"",link_class:"",link_rel:"",link_title:""}}),angular.module("motosliderApp").factory("defaultSettingsVideoBG",function(){return{autoplay:!0,mute:!1,loop:!0,controls:!1,fillmode:"fill",cover:!1,cover_type:""}}),angular.module("motosliderApp").factory("defaultSettingsVideo",function(){return{autoplay:!1,mute:!1,loop:!1,controls:!0,poster:""}}),angular.module("motosliderApp").factory("defaultSettingsParallax",function(){return{axis:"both",strength:1,detect:"mousemove",size:50,background:"#f3f3f3"}}),angular.module("motosliderApp").factory("defaultSettingsGradient",function(){return{position:"45deg",colorInitial:"#ffffff",colorFinal:"#ffffff"}}),angular.module("motosliderApp").factory("defaultLeaveAnimationLayers",function(){return{animation:"bounceOut"}}),angular.module("motosliderApp").factory("jsonTodos",["$http","jsonFile",function(a,b){return{getData:function(c){a.get(b).success(c)}}}]),angular.module("motosliderApp").filter("parallaxValidate",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("motosliderApp").factory("parseData",["$rootElement","defaults","defaultSettingsSlide","defaultSettingsVideo","defaultSettingsVideoBG","defaultSettingsParallax","defaultSettingsGradient","defaultLeaveAnimationLayers","grid","bgImageSettings","detectMobileDevice",function(a,b,c,d,e,f,g,h,i,j,k){var l=a.children(".motoslider"),m=l.children("#settings"),n=l.children("#slides").find(".slide"),o=[];n.each(function(a,i){var l=angular.element(i),m=l.find(".slide_bg"),n=l.find(".layers");if(0!==n.length){var p=n.find(".layer"),q=[];p.each(function(a,c){var e=angular.element(c).data("type"),f={type:e,animation:b.animationClassPrefix+(angular.isDefined(angular.element(c).data("animation"))?angular.element(c).data("animation"):b.layerAnimation),leaveAnimation:b.animationClassPrefix+(angular.isDefined(angular.element(c).data("leaveAnimation"))?angular.element(c).data("leaveAnimation"):h.animation),delay:angular.isDefined(angular.element(c).data("delay"))?angular.element(c).data("delay"):b.layerDelay,leaveDelay:angular.isDefined(angular.element(c).data("leaveDelay"))?angular.element(c).data("leaveDelay"):null,duration:angular.isDefined(angular.element(c).data("duration"))?angular.element(c).data("duration"):b.animationDuration,leaveDuration:angular.isDefined(angular.element(c).data("leaveDuration"))?angular.element(c).data("leaveDuration"):b.animationLeaveDuration,timingFunction:angular.isDefined(angular.element(c).data("timingFunction"))?"mpsl-"+angular.element(c).data("timingFunction"):null,leaveTimingFunction:angular.isDefined(angular.element(c).data("leaveTimingFunction"))?"mpsl-"+angular.element(c).data("leaveTimingFunction"):null,classes:angular.element(c).data("class"),position:{"align-horizontal":angular.element(c).data("align-horizontal"),"align-vertical":angular.element(c).data("align-vertical"),"offset-x":angular.element(c).data("offset-x"),"offset-y":angular.element(c).data("offset-y")}};switch(e){case"text":f.title=angular.element(c).html();break;case"image":f.src=angular.isDefined(angular.element(c).attr("src"))&&angular.element(c).attr("src").length?angular.element(c).attr("src"):"",f.linkClasses=angular.element(c).data("link-class"),f.target=angular.element(c).data("target"),f.link=angular.element(c).data("link")?angular.element(c).data("link").trim():"",f.width=angular.isDefined(angular.element(c).data("width"))?angular.element(c).data("width"):b.layerWidth;break;case"button":f.title=angular.element(c).text(),f.size=angular.element(c).data("size"),f.target=angular.element(c).data("target"),f.link=angular.element(c).data("link");break;case"html":f.content=angular.element(c).html();break;case"video":f.sources={src_webm:angular.element(c).data("src-webm"),src_mp4:angular.element(c).data("src-mp4"),src_ogv:angular.element(c).data("src-ogv")},f.width=angular.isDefined(angular.element(c).data("width"))?angular.element(c).data("width"):b.layerWidth,f.height=angular.isDefined(angular.element(c).data("height"))?angular.element(c).data("height"):b.layerHeight,f.format=angular.element(c).data("format"),f.poster=angular.element(c).data("poster"),f.autoplay=angular.isDefined(angular.element(c).data("autoplay"))&&!k?angular.element(c).data("autoplay"):d.autoplay,f.loop=angular.isDefined(angular.element(c).data("loop"))?angular.element(c).data("loop"):d.loop,f.controls=angular.isDefined(angular.element(c).data("controls"))?angular.element(c).data("controls"):d.controls,f.mute=angular.isDefined(angular.element(c).data("mute"))?angular.element(c).data("mute"):d.mute,f.fullWidth=angular.element(c).data("fullWidth"),f.disableMobile=angular.isDefined(angular.element(c).data("disableMobile"))?angular.element(c).data("disableMobile"):!1;break;case"vimeo":f.src=angular.element(c).data("src"),f.width=angular.isDefined(angular.element(c).data("width"))?angular.element(c).data("width"):b.layerWidth,f.height=angular.isDefined(angular.element(c).data("height"))?angular.element(c).data("height"):b.layerHeight,f.autoplay=angular.isDefined(angular.element(c).data("autoplay"))&&!k?angular.element(c).data("autoplay"):d.autoplay,f.loop=angular.isDefined(angular.element(c).data("loop"))?angular.element(c).data("loop"):d.loop,f.controls=angular.isDefined(angular.element(c).data("controls"))?angular.element(c).data("controls"):d.controls,f.mute=angular.isDefined(angular.element(c).data("mute"))?angular.element(c).data("mute"):d.mute,f.poster=angular.isDefined(angular.element(c).data("poster"))?angular.element(c).data("poster"):d.poster,f.disableMobile=angular.isDefined(angular.element(c).data("disableMobile"))?angular.element(c).data("disableMobile"):!1;break;case"youtube":f.src=angular.element(c).data("src"),f.width=angular.isDefined(angular.element(c).data("width"))?angular.element(c).data("width"):b.layerWidth,f.height=angular.isDefined(angular.element(c).data("height"))?angular.element(c).data("height"):b.layerHeight,f.autoplay=angular.isDefined(angular.element(c).data("autoplay"))&&!k?angular.element(c).data("autoplay"):d.autoplay,f.loop=angular.isDefined(angular.element(c).data("loop"))?angular.element(c).data("loop"):d.loop,f.controls=angular.isDefined(angular.element(c).data("controls"))?angular.element(c).data("controls"):d.controls,f.mute=angular.isDefined(angular.element(c).data("mute"))?angular.element(c).data("mute"):d.mute,f.poster=angular.isDefined(angular.element(c).data("poster"))?angular.element(c).data("poster"):d.poster,f.disableMobile=angular.isDefined(angular.element(c).data("disableMobile"))?angular.element(c).data("disableMobile"):!1}q.push(f)})}var r,s,t,u={};m.children().each(function(a,c){if(c=angular.element(c),r={},s={},t=c.data("type"),"parallax"===t){var h=c.find(".parallax_layer"),i=[];h.each(function(a,b){i.push({content:angular.element(b).html(),size:angular.isDefined(angular.element(b).data("size"))?angular.element(b).data("size"):f.size,"class":angular.element(b).data("class")})}),r={thumbnail:angular.isDefined(c.data("thumbnail"))&&0!==c.data("thumbnail").length?c.data("thumbnail"):null,parallaxSettings:{strength:angular.isDefined(c.data("strength"))?c.data("strength"):f.strength,axis:angular.isDefined(c.data("axis"))?c.data("axis"):f.axis,detect:angular.isDefined(c.data("detect"))?c.data("detect"):f.detect,background:angular.isDefined(c.data("background"))?c.data("background"):f.background,parallaxLayers:i}}}else"image"===t?s={fit:angular.isDefined(c.data("fit"))?c.data("fit"):j.defaultFit,fitX:angular.isDefined(c.data("fit-x"))?c.data("fit-x"):j.defaultFitPercentage.x,fitY:angular.isDefined(c.data("fit-y"))?c.data("fit-y"):j.defaultFitPercentage.y,positionX:angular.isDefined(c.data("position-x"))?c.data("position-x"):j.defaultPositionPercentage.x,positionY:angular.isDefined(c.data("position-y"))?c.data("position-y"):j.defaultPositionPercentage.y,position:angular.isDefined(c.data("position"))?c.data("position"):j.defaultPosition,repeat:angular.isDefined(c.data("repeat"))?c.data("repeat"):j.defaultRepeat,src:angular.isDefined(c.data("src"))&&0!==c.data("src").length?c.data("src"):null,thumbnail:angular.isDefined(c.data("thumbnail"))&&0!==c.data("thumbnail").length?c.data("thumbnail"):null,title:c.data("title"),format:c.data("format"),controls:angular.isDefined(c.data("controls"))?c.data("controls"):d.controls}:"video"===t?(angular.isDefined(c.data("src-webm"))||angular.isDefined(c.data("src-mp4"))||angular.isDefined(c.data("src-ogg")))&&(s={showVideo:!0,sources:{webm:c.data("src-webm"),mp4:c.data("src-mp4"),ogg:c.data("src-ogg")},controls:angular.isDefined(c.data("controls"))?c.data("controls"):d.controls,loop:angular.isDefined(c.data("loop"))?c.data("loop"):e.loop,mute:angular.isDefined(c.data("mute"))?c.data("mute"):e.mute,fillmode:angular.isDefined(c.data("fillmode"))?c.data("fillmode"):e.fillmode,cover:angular.isDefined(c.data("cover"))?c.data("cover"):e.cover,cover_type:angular.isDefined(c.data("cover-type"))?c.data("cover-type"):e.cover_type,autoplay:angular.isDefined(c.data("autoplay"))&&!k?c.data("autoplay"):e.autoplay}):"color"===t?s={thumbnail:angular.isDefined(c.data("thumbnail"))&&0!==c.data("thumbnail").length?c.data("thumbnail"):null,color:angular.isDefined(c.data("color"))?c.data("color"):b.bgColorSlide}:"youtube"===t?s={thumbnail:angular.isDefined(c.data("thumbnail"))&&0!==c.data("thumbnail").length?c.data("thumbnail"):null,src:c.data("src"),controls:angular.isDefined(c.data("controls"))?c.data("controls"):b.settingsYoutubeSlide.controls}:"gradient"===t?s={thumbnail:angular.isDefined(c.data("thumbnail"))&&0!==c.data("thumbnail").length?c.data("thumbnail"):null,position:angular.isDefined(c.data("position"))?c.data("position"):g.position,colorInitial:angular.isDefined(c.data("colorInitial"))?c.data("colorInitial"):g.colorInitial,colorFinal:angular.isDefined(c.data("colorFinal"))?c.data("colorFinal"):g.colorFinal}:"color"===t&&(s={thumbnail:angular.isDefined(c.data("thumbnail"))&&0!==c.data("thumbnail").length?c.data("thumbnail"):null,color:c.data("color")});Object.keys(s).length&&(u[t]=s,u[t].type=t)}),o.push({general:{animation:angular.isDefined(l.data("animation"))?l.data("animation"):b.slideEnterAnimation,fadeAnimation:angular.isDefined(l.data("fade-animation"))?l.data("fade-animation"):b.slideLeaveAnimation,duration:angular.isDefined(l.data("duration"))?l.data("duration"):b.slideDuration,easing:angular.isDefined(l.data("easing"))?l.data("easing"):b.slideEasing,classes:angular.isDefined(l.data("class"))?l.data("class"):c.class,id:angular.isDefined(l.data("id"))?l.data("id"):c.id,link:angular.isDefined(l.data("link"))?l.data("link"):c.link,link_target:angular.isDefined(l.data("link-target"))?l.data("link-target"):c.link_target,link_id:angular.isDefined(l.data("link-id"))?l.data("link-id"):c.link_id,link_class:angular.isDefined(l.data("link-class"))?l.data("link-class"):c.link_class,link_rel:angular.isDefined(l.data("link-rel"))?l.data("link-rel"):c.link_rel,link_title:angular.isDefined(l.data("link-title"))?l.data("link-title"):c.link_title},backgrounds:u,layers:q})});var p,q;angular.isDefined(m.data("startSlide"))?(q=m.data("startSlide"),p=q&&q<=o.length?q-1:b.startSlide):p=b.startSlide;var r={settings:{editMode:angular.isDefined(m.data("editMode"))?m.data("editMode"):!1,timer:angular.isDefined(m.data("timer"))?m.data("timer"):b.timer,timerDelay:angular.isDefined(m.data("timerDelay"))?m.data("timerDelay"):b.timerDelay,timerReverse:angular.isDefined(m.data("timerReverse"))?m.data("timerReverse"):b.timerReverse,counter:angular.isDefined(m.data("counter"))?m.data("counter"):b.counter,fullWidth:angular.isDefined(m.data("fullWindowWidth"))?m.data("fullWindowWidth"):b.fullWindowResize,thumbnails:angular.isDefined(m.data("showThumbnails"))?m.data("showThumbnails"):b.showThumbnails,hoverTimer:angular.isDefined(m.data("hoverTimer"))?m.data("hoverTimer"):b.hoverTimer,gridHeight:angular.isDefined(m.data("gridHeight"))?m.data("gridHeight"):i.defaultHeight,gridWidth:angular.isDefined(m.data("gridWidth"))?m.data("gridWidth"):i.defaultWidth,minHeight:angular.isDefined(m.data("minHeight"))?m.data("minHeight"):"500",isSingleSlide:1===o.length,isSlideshowEnabled:angular.isDefined(m.data("timer"))?m.data("timer"):b.timer,swipe:angular.isDefined(m.data("swipe"))?m.data("swipe"):b.swipe,customClass:angular.isDefined(m.data("customClass"))?m.data("customClass"):b.sliderSettings.customClass,arrowsShow:angular.isDefined(m.data("arrows-show"))?m.data("arrows-show"):b.sliderSettings.arrowsShow,thumbnailsShow:angular.isDefined(m.data("thumbnails-show"))?m.data("thumbnails-show"):b.sliderSettings.thumbnailsShow,slideshowTimerShow:angular.isDefined(m.data("slideshow-timer-show"))?m.data("slideshow-timer-show"):b.sliderSettings.slideshowTimerShow,slideshowPPBShow:angular.isDefined(m.data("slideshow-ppb-show"))?m.data("slideshow-ppb-show"):b.sliderSettings.slideshowPPBShow,controlsHideOnLeave:angular.isDefined(m.data("controls-hide-on-leave"))?m.data("controls-hide-on-leave"):b.sliderSettings.controlsHideOnLeave,visibleFrom:angular.isDefined(m.data("visible-from"))&&""!==m.data("visible-from")?m.data("visible-from"):b.sliderSettings.visibleFrom,visibleTill:angular.isDefined(m.data("visible-till"))&&""!==m.data("visible-till")?m.data("visible-till"):b.sliderSettings.visibleTill,scrollInit:angular.isDefined(m.data("scrollInit"))?m.data("scrollInit"):b.scrollInit,delayInit:angular.isDefined(m.data("delayInit"))?m.data("delayInit"):b.delayInit,startSlide:p},defaults:b,slides:o};return r.settings.slideAnimation=r.slides[0].general.animation,r.settings.slideDuration=r.slides[0].general.duration,r.settings.slideEasing=r.slides[0].general.easing,{getData:function(){return r}}}]),angular.module("motosliderApp").controller("MotosliderCtrl",["$scope","$rootScope","jsonTodos","defaults","parseData","$timeout","$sce","$q","$interval","$rootElement","detectMobileDevice","$swipe",function(a,b,c,d,e,f,g,h,i,j,k){a.data=e.getData(),a.detectMobile=k,a.bannerLine=j.find(".ms_banner_inner"),a.ppButton=j.find(".ms_start_pause"),a.bullets=j.find(".ms_pagination"),a.arrows=j.find(".ms_arrows"),a.slideAnimationDefer=h.defer(),a.slideAnimationEnd=a.slideAnimationDefer.promise,a.slideAnimating=!1,a.isHover=!1,a.sliderMouseEnter=!a.data.settings.controlsHideOnLeave,a.currentTimer=a.data.settings.timer,a.firstSlideLoaded=!1;var l=h.defer();a.sliderLoaded=l.promise,a.isTouchDevice="ontouchstart"in window||"undefined"!=typeof window.navigator.maxTouchPoints&&navigator.maxTouchPoints>0||"undefined"!=typeof window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>0,a.$$postDigest(function(){h.all(a.deferred).then(function(){j.find(".ms_wrapper").css("opacity",1),j.find(".ms_preload_wrapper").removeClass("ms_active"),angular.element(j.find(".ms_repeater")[a.data.settings.startSlide]).addClass("ms_active"),a.firstSlideEnded=!1,MPSLManager.swiped=!1,a.bullets.removeClass("ms_control_show"),a.tempTimerForVideo=!0,j.trigger("MPSliderLoad"),l.resolve(),(a.data.settings.timer||a.data.settings.timer&&a.data.settings.hoverTimer)&&(a.ppButton.addClass("ms_pause"),a.startTimer())})}),a.getCurrentScope=function(){return a.$id},a.currentIndex=a.data.settings.startSlide,a.testManual=!1,a.reInitTimer=function(){a.currentTimer&&a.data.settings.timer?(a.data.settings.timer=!0,a.ppButton.hasClass("ms_pause")||a.ppButton.addClass("ms_pause")):(a.data.settings.timer=!1,a.ppButton.hasClass("ms_pause")&&a.ppButton.removeClass("ms_pause"))},a.changeSlideManualy=function(b){if(b===a.currentIndex)return!1;a.slideAnimationDefer.reject(),a.slideAnimationDefer=h.defer(),a.slideAnimationEnd=a.slideAnimationDefer.promise,a.reInitTimer(),a.pauseProgressBar(),f.cancel(a.motoTimer),a.currentEndTime=0,a.diffStartStop=0,a.addLeaveAnimation();var c=a.getTotalDelay();a.paginateSlide=f(function(){parseInt(b)>parseInt(a.currentIndex)?a.setRightClass():parseInt(b)<parseInt(a.currentIndex)&&a.setLeftClass(),a.currentIndex=b,a.quickScroll=!1,MPSLManager.swiped=!1,a.appliedPauses=!1,f.cancel(a.paginateSlide),f.cancel(a.motoTimer),a.currentEndTime=0,a.data.settings.timer?MPSLManager.swiped||"msSlideFade"===a.data.settings.slideAnimation?a.startTimer():h.when(a.slideAnimationEnd).then(function(){a.startTimer()}):a.reInitProgressBar(a.timerSeconds)},c)},a.checkEditMode=function(){return!a.data.settings.editMode},a.setCurrentSlideIndex=function(b){a.currentIndex=b},a.setRightClass=function(){angular.element("#"+a.getCurrentScope()).addClass("ms_to_right").removeClass("ms_to_left")},a.setLeftClass=function(){angular.element("#"+a.getCurrentScope()).addClass("ms_to_left").removeClass("ms_to_right")},a.isCurrentIndex=function(b){return a.currentIndex===b},a.isCurrentIndexFirst=function(b){return b===a.data.settings.startSlide},a.isThisSlideCurrent=function(a){return parseInt(a.parents(".ms_repeater").data("currentIndex"))===parseInt(this.currentIndex)},a.appliedPauses=!1,a.addLeaveAnimation=function(b){var c=j.find(".ms_repeater")[a.currentIndex],d=angular.element(c).find(".ms_layer");0!==d.length&&angular.forEach(d,function(c){var d=angular.element(c),e=d.scope();switch(angular.isUndefined(b)&&e.layer.leave(),e.layer.type){case"video":e.seekTo(0),e.pauseVideo();break;case"vimeo":e.seekTo(1e-5),e.pauseVideo();break;case"youtube":e.pauseVideo()}a.appliedPauses=!0})},a.getTotalDelay=function(){var b=angular.element("#"+a.getCurrentScope()).find(".ms_repeater"),c=b[a.currentIndex],d=angular.element(c).find(".layers");if(0!==d.length){var e=[];d.children().each(function(a,b){e.push(angular.element(b).attr("leave-delay"))});var f=Math.max.apply(Math,e);return isNaN(f)?1500:f+500}},a.next=function(){f.cancel(a.timerPrev),a.currentIndex=parseInt(a.currentIndex)<parseInt(a.data.slides.length)-1?parseInt(a.currentIndex)+1:0,a.currentEndTime=0,a.appliedPauses=!1,a.firstSlideEnded=!0},a.prev=function(){f.cancel(a.timerNext),a.currentIndex=parseInt(a.currentIndex)>0?parseInt(a.currentIndex)-1:parseInt(a.data.slides.length)-1,a.currentEndTime=0,a.appliedPauses=!1,a.firstSlideEnded=!0},a.nextSlide=function(b){if(a.slideAnimationDefer.reject(),a.slideAnimationDefer=h.defer(),a.slideAnimationEnd=a.slideAnimationDefer.promise,a.pauseProgressBar(),b){var c=a.quickScroll?500:a.getTotalDelay();a.reInitTimer(),f.cancel(a.motoTimer),a.currentEndTime=0,a.diffStartStop=0,a.addLeaveAnimation(),a.timerNext=f(function(){f.cancel(a.timerPrev),a.data.settings.timer?MPSLManager.swiped||"msSlideFade"===a.data.settings.slideAnimation?a.startTimer():h.when(a.slideAnimationEnd).then(function(){a.startTimer()}):a.reInitProgressBar(a.timerSeconds),a.setRightClass(),a.next(),f.cancel(a.timerNext)},c)}else a.addLeaveAnimation(!0),a.setRightClass(),a.next()},a.prevSlide=function(b){if(a.slideAnimationDefer.reject(),a.slideAnimationDefer=h.defer(),a.slideAnimationEnd=a.slideAnimationDefer.promise,a.pauseProgressBar(),b){var c=a.quickScroll?500:a.getTotalDelay();a.reInitTimer(),f.cancel(a.motoTimer),a.currentEndTime=0,a.diffStartStop=0,a.addLeaveAnimation(),a.timerPrev=f(function(){f.cancel(a.timerNext),a.data.settings.timer?MPSLManager.swiped||"msSlideFade"===a.data.settings.slideAnimation?a.startTimer():h.when(a.slideAnimationEnd).then(function(){a.startTimer()
}):a.reInitProgressBar(a.timerSeconds),a.setLeftClass(),a.prev(),f.cancel(a.timerPrev)},c)}else a.addLeaveAnimation(!0),a.setLeftClass(),a.prev()},a.nextSlideOutside=function(){a.currentIndex=parseInt(a.currentIndex)<parseInt(a.data.slides.length)-1?parseInt(a.currentIndex)+1:0},a.prevSlideOutside=function(){a.currentIndex=parseInt(a.currentIndex)>0?parseInt(a.currentIndex)-1:parseInt(a.data.slides.length)-1},a.isSlideBgType=function(a){return a in this.slide.backgrounds},a.isLayerType=function(a){return this.layer.type===a},a.isCounter=function(){return a.data.settings.counter},a.dataAdjustment=function(){(angular.isUndefined(a.data.settings.height)||0===a.data.settings.height.length)&&(a.data.settings.height=d.height)},a.diffStartStop=0,a.startTimer=function(){return a.quickScroll=!1,a.currentTimeStart=Date.now(),a.timerSeconds=0===a.currentEndTime||angular.isUndefined(a.currentEndTime)?a.data.settings.timerDelay:a.data.settings.timerDelay-a.diffStartStop,(isNaN(a.timerSeconds)||a.timerSeconds<0)&&(a.timerSeconds=a.data.settings.timerDelay,a.diffStartStop=0),b.isHover?!1:(a.startProgressBarByDelay(!0),void(a.motoTimer=f(function(){a.currentTimeStart=null,a.data.settings.timerReverse?a.prevSlide(!1):a.nextSlide(!1),MPSLManager.swiped||"msSlideFade"===a.data.settings.slideAnimation?(f.cancel(a.motoTimer),a.currentEndTime=0,a.diffStartStop=0,a.pieTimerCurrentStop=0,a.startTimer(!0)):h.when(a.slideAnimationEnd).then(function(){f.cancel(a.motoTimer),a.currentEndTime=0,a.diffStartStop=0,a.pieTimerCurrentStop=0,a.startTimer(!0)}),MPSLManager.swiped=!1},a.timerSeconds)))},a.stopTimer=function(){a.diffStartStop=angular.isUndefined(a.diffStartStop)?0:a.diffStartStop,a.diffStartStop+=Date.now()-a.currentTimeStart,a.currentEndTime=a.data.settings.timerDelay-a.diffStartStop,a.tempTime=Date.now(),a.pauseProgressBar(),f.cancel(a.motoTimer),a.timerSeconds=0===a.currentEndTime||angular.isUndefined(a.currentEndTime)?a.data.settings.timerDelay:a.data.settings.timerDelay-a.diffStartStop},a.setTimerSeconds=function(){a.timerSeconds=0===a.currentEndTime||angular.isUndefined(a.currentEndTime)?a.data.settings.timerDelay:a.data.settings.timerDelay-a.diffStartStop},a.reInitProgressBar=function(){a.data.settings.slideshowTimerShow&&a.bannerLine.css({width:"0%"})},a.startPieTimer=function(){angular.element("#"+a.getCurrentScope()).find(".ms_banner_inner")},a.progressBarCalc=function(){a.diffStartStop+=Date.now()-a.currentTimeStart,a.currentTimeStart=Date.now(),a.bannerTime=a.firstSlideEnded?a.diffStartStop>d.bannerDelay?a.diffStartStop-d.bannerDelay:0:a.diffStartStop,a.progress=a.bannerTime/a.percentStep,a.data.settings.slideshowTimerShow&&a.bannerLine.css("width",a.progress+"%")},a.startProgressBarByDelay=function(b){a.cBannerDelay=a.firstSlideEnded?d.bannerDelay:0,a.data.settings.slideshowTimerShow&&a.bannerLine.parent().show(),i.cancel(a.bannerInterval),a.bannerPause||a.data.settings.slideshowTimerShow&&a.bannerLine.css({width:"0%"}),a.percentStep=(a.data.settings.timerDelay-a.cBannerDelay)/100,a.progressBarCalc(),a.bannerInterval=i(function(){a.progressBarCalc(),a.progress>=100&&i.cancel(a.bannerInterval)},(a.data.settings.timerDelay-a.cBannerDelay)/800),b||a.reInitProgressBar(a.timerSeconds),a.currentKeyTimer?(a.timerSeconds===a.data.settings.timerDelay&&a.reInitProgressBar(a.timerSeconds),a.currentKeyTimer=!1):a.reInitProgressBar(a.timerSeconds)},a.pauseProgressBar=function(){a.bannerPause=!0,i.cancel(a.bannerInterval),f.cancel(a.bannerTimeout),a.currentKeyTimer=!0},a.changeStartStopButton=function(){a.ppButton.removeClass("ms_pause")},a.$watch("currentIndex",function(){a.data.slides.forEach(function(a){a.visible=!1}),angular.isDefined(a.data.slides[a.currentIndex])&&(a.data.slides[a.currentIndex].visible=!0)}),a.data.settings.countSlides=a.data.slides.length,a.data.settings.editMode?(a.data.settings.timer=!1,a.data.settings.hoverTimer=!1,a.bullets.hide(),a.arrows.hide()):a.SliderManager={},1===a.data.slides.length&&(a.data.settings.timer=!1,a.data.settings.hoverTimer=!1,a.bullets.hide(),a.arrows.hide()),a.dataAdjustment(),a.initSlider=function(){function b(a){this.element=0!=angular.element(a).children().length?angular.element(a).children(".ms_layer"):angular.element(a),this.domElement=angular.element(a)[0],this.elementScope=this.element.scope()}function c(a){this.element=angular.element(a),this.domElement=angular.element(a)[0],this.elementScope=this.element.scope()}b.prototype.getDomElement=function(){return this.domElement},b.prototype.setOptions=function(b){this.elementScope.manipulate(b),a.$apply()},b.prototype.getType=function(){return this.elementScope.layer.type},b.prototype.getOrder=function(){return this.elementScope.$index},b.prototype.remove=function(){this.elementScope.delete(this.elementScope)},c.prototype.setOptions=function(a,b){this.elementScope.manipulateSlide(this.elementScope,a,b)},a.SliderManager={getSlide:function(a){return new c(a)},getLayer:function(a){return new b(a)},createLayer:function(c,d){var e={};for(var f in d)e[f]=d[f];e.type=c,a.data.slides[0].layers.push(e),a.$apply();var g=j.find(".ms_repeater")[0],h=angular.element(g).find(".layers"),i=new b(h[h.length-1]);return i.getDomElement()}}},a.calculationOfPosition=function(b,c,d){var e,f,g=a.data.settings.gridWidth,h=d.outerWidth(),i=d.outerHeight(),j=c.outerWidth(),k=c.outerHeight(),l=0,m=h/g;return m>1&&(m=1,l=h-g),"center"===b["align-horizontal"]&&(e=h/2-j/2+b["offset-x"]*m),"left"===b["align-horizontal"]&&(e=b["offset-x"]*m+l/2),"right"===b["align-horizontal"]&&(e=h-l/2-j-b["offset-x"]*m),"middle"===b["align-vertical"]&&(f=i/2-k/2+b["offset-y"]*m),"top"===b["align-vertical"]&&(f=b["offset-y"]*m),"bottom"===b["align-vertical"]&&(f=i-k-b["offset-y"]*m),{top:f,left:e}},a.calculationSP=function(b,c){c.css({"font-size":a.px(b["font-size"]*a.factor),"padding-top":a.px(b["padding-top"]*a.factor),"padding-right":a.px(b["padding-right"]*a.factor),"padding-bottom":a.px(b["padding-bottom"]*a.factor),"padding-left":a.px(b["padding-left"]*a.factor),"border-top-width":a.px(b["border-top-width"]*a.factor),"border-right-width":a.px(b["border-right-width"]*a.factor),"border-left-width":a.px(b["border-left-width"]*a.factor),"border-bottom-width":a.px(b["border-bottom-width"]*a.factor),"letter-spacing":a.px(b["letter-spacing"]*a.factor),"line-height":a.px(b["line-height"]*a.factor)})},a.calculationWP=function(b,c){c.css({width:a.px(b.width*a.factor),"padding-top":a.px(b["padding-top"]*a.factor),"padding-right":a.px(b["padding-right"]*a.factor),"padding-bottom":a.px(b["padding-bottom"]*a.factor),"padding-left":a.px(b["padding-left"]*a.factor),"border-top-width":a.px(b["border-top-width"]*a.factor),"border-right-width":a.px(b["border-right-width"]*a.factor),"border-left-width":a.px(b["border-left-width"]*a.factor),"border-bottom-width":a.px(b["border-bottom-width"]*a.factor),"letter-spacing":a.px(b["letter-spacing"]*a.factor),"line-height":a.px(b["line-height"]*a.factor)})},a.calculationImageWP=function(b,c,d,e){d&&d.css({"padding-top":a.px(b["padding-top"]*a.factor),"padding-right":a.px(b["padding-right"]*a.factor),"padding-bottom":a.px(b["padding-bottom"]*a.factor),"padding-left":a.px(b["padding-left"]*a.factor),"border-top-width":a.px(b["border-top-width"]*a.factor),"border-right-width":a.px(b["border-right-width"]*a.factor),"border-left-width":a.px(b["border-left-width"]*a.factor),"border-bottom-width":a.px(b["border-bottom-width"]*a.factor),"letter-spacing":a.px(b["letter-spacing"]*a.factor),"line-height":a.px(b["line-height"]*a.factor)}),e.css({width:a.px(c.width*a.factor),"padding-top":a.px(c["padding-top"]*a.factor),"padding-right":a.px(c["padding-right"]*a.factor),"padding-bottom":a.px(c["padding-bottom"]*a.factor),"padding-left":a.px(c["padding-left"]*a.factor),"border-top-width":a.px(c["border-top-width"]*a.factor),"border-right-width":a.px(c["border-right-width"]*a.factor),"border-left-width":a.px(c["border-left-width"]*a.factor),"border-bottom-width":a.px(c["border-bottom-width"]*a.factor),"letter-spacing":a.px(c["letter-spacing"]*a.factor),"line-height":a.px(c["line-height"]*a.factor)})},a.calculationWHP=function(b,c){c.css({width:a.px(b.width*a.factor),height:a.px(b.height*a.factor),"padding-top":a.px(b["padding-top"]*a.factor),"padding-right":a.px(b["padding-right"]*a.factor),"padding-bottom":a.px(b["padding-bottom"]*a.factor),"padding-left":a.px(b["padding-left"]*a.factor),"border-top-width":a.px(b["border-top-width"]*a.factor),"border-right-width":a.px(b["border-right-width"]*a.factor),"border-left-width":a.px(b["border-left-width"]*a.factor),"border-bottom-width":a.px(b["border-bottom-width"]*a.factor),"letter-spacing":a.px(b["letter-spacing"]*a.factor),"line-height":a.px(b["line-height"]*a.factor)})},a.setProportions=function(b){b.css({"font-size":a.px(a.slice(b.css("font-size"))*a.factor),"padding-top":a.px(a.slice(b.css("padding-top"))*a.factor),"padding-right":a.px(a.slice(b.css("padding-right"))*a.factor),"padding-bottom":a.px(a.slice(b.css("padding-bottom"))*a.factor),"padding-left":a.px(a.slice(b.css("padding-left"))*a.factor),"border-top-width":a.px(a.slice(b.css("border-top-width"))*a.factor),"border-right-width":a.px(a.slice(b.css("border-right-width"))*a.factor),"border-left-width":a.px(a.slice(b.css("border-left-width"))*a.factor),"border-bottom-width":a.px(a.slice(b.css("border-bottom-width"))*a.factor),"letter-spacing":a.px(a.slice(b.css("letter-spacing"))*a.factor),"line-height":a.px(a.slice(b.css("line-height"))*a.factor)})},a.refreshProportions=function(){return{"font-size":16,"padding-top":0,"padding-right":0,"padding-bottom":0,"padding-left":0}},a.setPositions=function(a,b){a.css({top:b.top,left:b.left})},a.applyLeaveAnimation=function(b,c,d){var e=d-(a.data.settings.timerDelay-a.timerSeconds);a.leaveTimer=f(function(){c.removeClass(b.animation),c.addClass(b.leaveAnimation),f.cancel(a.leaveTimer)},e)},a.percentage=function(a){return parseInt(a)+"%"},a.s=function(a){return parseInt(a)+"s"},a.ms=function(a){return parseInt(a)+"ms"},a.px=function(a){return a+"px"},a.slice=function(a){return"number"==typeof a&&(a=a.toString()),"string"!=typeof a&&(a=""),a.slice(0,-2)},a.stopPlayingTimer=function(){a.slideAnimationDefer.reject(),a.slideAnimationDefer=h.defer(),a.slideAnimationEnd=a.slideAnimationDefer.promise,a.data.settings.timer&&!a.data.settings.isSingleSlide&&a.data.settings.isSlideshowEnabled&&(a.ppButton.removeClass("ms_pause"),a.data.settings.timer=!1,f.cancel(a.motoTimer),a.stopTimer(),a.$$phase||a.$apply())},a.startPlayingTimer=function(){a.data.settings.timer||a.data.settings.isSingleSlide||!a.data.settings.isSlideshowEnabled||(isNaN(a.diffStartStop)&&a.diffStartStop<0&&(a.diffStartStop=0),!a.data.settings.timer&&a.currentTimer&&a.tempTimerForVideo&&(a.ppButton.addClass("ms_pause"),a.data.settings.timer=!0,a.startTimer()),a.$$phase||a.$apply())},a.aIds=[],a.verifyPlayers=function(a){for(var b={},c=0;c<a.length;++c){var d=a[c];if(Object.prototype.hasOwnProperty.call(b,d))return!0;b[d]=!0}return!1},a.arrYoutubePlayersState={},a.arrVideoPlayersState={},a.arrVimeoPlayersState={},a.checkAllPlayers=function(){for(var b in a.arrYoutubePlayersState)if(1===a.arrYoutubePlayersState[b]||3===a.arrYoutubePlayersState[b])return!1;for(var b in a.arrVideoPlayersState)if(!a.arrVideoPlayersState[b].paused)return!1;for(var b in a.arrVimeoPlayersState)if("play"===a.arrVimeoPlayersState[b])return!1;return!0},a.youtubeApiScriptAdded=!1,a.loadYoutubeApiScript=function(){if(!a.youtubeApiScriptAdded&&!angular.element('script[src="//www.youtube.com/iframe_api"]').length){var b=document.createElement("script");b.src="//www.youtube.com/iframe_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),a.youtubeApiScriptAdded=!0}},"undefined"==typeof window.mpslYTApiReady&&(a.youtubeApiReadyDefer=h.defer(),window.mpslYTApiReady=a.youtubeApiReadyDefer.promise,window.onYouTubeIframeAPIReady=function(){a.youtubeApiReadyDefer.resolve()}),a.disableMobileCheck=function(a){return k&&a?!1:!0},a.showPagination=function(){return a.data.settings.editMode||!a.data.settings.thumbnailsShow||k||a.data.settings.isSingleSlide?!1:!0},a.timeoutLeave=function(b){f.cancel(b.layer.layerTimerLeave),isNaN(a.timerSeconds)&&(a.timerSeconds=a.data.settings.timerDelay),b.layer.currDelay=angular.isUndefined(b.layer.leaveDelay)||null===b.layer.leaveDelay?a.timerSeconds-1500:b.layer.leaveDelay-(a.data.settings.timerDelay-a.timerSeconds),b.layer.layerTimerLeave=f(function(){b.layer.leave(),f.cancel(b.layer.layerTimerLeave)},b.layer.currDelay)},a.applyLAnimation=function(c,d){h.when(a.sliderLoaded).then(function(){a.data.settings.timer&&!b.isHover&&(a.firstSlideEnded&&!MPSLManager.swiped&&"msSlideFade"!==a.data.settings.slideAnimation?h.when(a.slideAnimationEnd).then(function(){a.timeoutLeave(c,d)}):a.timeoutLeave(c,d))})},a.addLayerAnimation=function(b,c){h.when(a.sliderLoaded).then(function(){c.parents(".ms_slide").hasClass("ms_current_slide")&&(c.addClass(d.animatedClass+" "+b.animation),angular.element(c).css({"-webkit-animation-delay":a.ms(b.delay),"animation-delay":a.ms(b.delay)})),b.duration&&angular.element(c).css({"animation-duration":a.ms(b.duration),"-webkit-animation-duration":a.ms(b.duration)}),b.timingFunction&&c.addClass(b.timingFunction)})},a.setElementPosition=function(b,c,d){var e,f=b.width(),g=b.height(),h=c.title,j=c.classes,k=c.content,l=c.type;e="button"===l?!j||!h:"html"===l?!j||!k:!j;var m=i(function(h){var j=b.width(),k=b.height();f===j&&g===k||e||h>=30?(a.setPositions(b,a.calculationOfPosition(c.position,b,b.parents("#"+a.getCurrentScope()))),d.resolve(),i.cancel(m)):(f=j,g=k)},200)},a.addLeaveLayerAnimation=function(b,c){b.removeClass(c.animation),"mpsl-auto"===c.leaveAnimation&&(c.leaveAnimation="flip"===c.animation?"flip":c.animation.replace("In","Out")),b.addClass(c.leaveAnimation);var d=a.quickScroll?0:500;angular.element(b).css({"-webkit-animation-delay":a.ms(d),"animation-delay":a.ms(d)})},a.addEnterLayerAnimation=function(b,c){MPSLManager.swiped||"msSlideFade"===a.data.settings.slideAnimation?(b.removeClass(c.leaveAnimation),b.addClass(d.animatedClass),b.addClass(c.animation),angular.element(b).css({"-webkit-animation-delay":a.ms(c.delay),"animation-delay":a.ms(c.delay)})):h.when(a.slideAnimationEnd).then(function(){b.removeClass(c.leaveAnimation),b.addClass(d.animatedClass),b.addClass(c.animation),angular.element(b).css({"-webkit-animation-delay":a.ms(c.delay),"animation-delay":a.ms(c.delay)})},function(){b.removeClass(c.leaveAnimation),b.addClass(d.animatedClass),b.addClass(c.animation),angular.element(b).css({"-webkit-animation-delay":a.ms(c.delay),"animation-delay":a.ms(c.delay)})})}}]),angular.module("motosliderApp").directive("motoslider",["$templateCache","defaults","$http","$compile",function(a){return{restrict:"AE",replace:!0,controller:"MotosliderCtrl",scope:!0,template:a.get("../app/views/MsTemplate.html"),link:function(a,b){a.deferred=[],a.defaultWidth=parseInt(b.width()),b.css("opacity",0)}}}]),angular.module("motosliderApp").directive("msRepeater",[function(){return{link:function(a){var b=function(a,c){angular.forEach(c,function(c,d){angular.isObject(c)&&a.hasOwnProperty(d)?b(a[d],c):a[d]=c})};a.manipulateSlide=function(c,d){d.hasOwnProperty("backgrounds")&&angular.forEach(a.slide.backgrounds,function(b,c){d.backgrounds.hasOwnProperty(c)||delete a.slide.backgrounds[c]}),b(a.slide,d),a.$apply()}}}}]),angular.module("motosliderApp").directive("msCounter",function(){return{restrict:"A",link:function(a,b){a.$watch("currentIndex",function(c){var d=parseInt(c+1)+"/"+parseInt(a.data.settings.countSlides);angular.element(b).html(d)})}}}),angular.module("motosliderApp").directive("msResize",["$timeout","$q","$rootScope",function(a,b,c){return{link:function(b,d){if(!b.data.settings.editMode){if(b.data.settings.controlsHideOnLeave)if(b.isTouchDevice){var e;d.bind("touchstart",function(){a.cancel(e),b.$apply("sliderMouseEnter = true"),e=a(function(){b.$apply("sliderMouseEnter = false"),a.cancel(e)},2e3)})}else d.bind("mouseenter",function(){b.$apply("sliderMouseEnter = true")}),d.bind("mouseleave",function(){b.$apply("sliderMouseEnter = false")});b.data.settings.timer&&b.data.settings.hoverTimer&&(b.ppButton.addClass("ms_pause"),b.isTouchDevice?d.bind("touchend",function(a){var c=angular.element(a.target).parent();c.hasClass("ms_arrows")||c.hasClass("ms_bullet_wrapper")||(d.hasClass("ms_touched")?(d.removeClass("ms_touched"),b.start(a)):(d.addClass("ms_touched"),b.pause(a)))}):(d.bind("mouseenter",function(a){c.isHover=!0,c.slideAnimating||b.pause(a,this)}),d.bind("mouseleave",function(a){c.isHover=!1,c.slideAnimating||b.start(a)})))}b.start=function(){b.ppButton.addClass("ms_pause"),b.data.settings.timer=!0,b.startTimer(),b.$digest()},b.pause=function(c,d){b.ppButton.removeClass("ms_pause"),b.data.settings.timer=!1,a.cancel(b.motoTimer),b.stopTimer(),angular.element(d).find(".ms_current_slide").find(".ms_layer").length&&a.cancel(angular.element(d).find(".ms_current_slide").find(".ms_layer").scope().layer.layerTimerLeave),b.$digest()}}}}]),angular.module("motosliderApp").directive("msResize",["$window","defaults","grid","$timeout","$rootElement",function(a){return{link:function(b,c){b.getDimensions=function(){return{height:c.height(),width:c.width()}},b.setHeight=function(a){angular.element(c).css({height:parseInt(a*b.data.settings.gridHeight/b.data.settings.gridWidth),"max-height":b.data.settings.gridHeight})},b.setDimensions=function(a){angular.isDefined(a)&&b.setHeight(a.width)},b.setHeight(angular.element(c).width()),b.setFactor=function(a){b.factor=parseInt(a)/parseInt(b.data.settings.gridWidth),b.factor=b.factor>1?1:b.factor},b.setFactor(angular.element(c).width()),b.setFullWidth=function(){if(b.data.settings.fullWidth){var e="BackCompat"==document.compatMode?document.body:document.documentElement,f=e.scrollHeight>e.clientHeight?d():0,g=a.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=angular.element(c).parent()[0].getBoundingClientRect().left,i=g-h-angular.element(c).parent().outerWidth()-f;angular.element(c).css({"max-width":"none",width:"auto","margin-left":-h+"px","margin-right":-i+"px"})}};var d=function(){document.body.style.overflow="hidden";var a=document.body.clientWidth;return document.body.style.overflow="scroll",a-=document.body.clientWidth,a||(a=document.body.offsetWidth-document.body.clientWidth),document.body.style.overflow="",a};b.applyResize=function(){var a=b.getDimensions();b.setDimensions(a),b.setFactor(a.width)},b.setFullWidth(),b.applyResize(),b.currentWidth=c.width(),b.data.settings.editMode||angular.element(a).bind("resize",function(){b.setFullWidth(),b.applyResize(),b.$apply(),b.currentWidth=c.width()})}}}]),angular.module("motosliderApp").directive("msResizeCurrent",["$window",function(a){var b=function(a,b,c){{var d=b.parents("#"+a.getCurrentScope());d.outerHeight(),d.outerWidth()}if(angular.isDefined(a.layer.type)){var e,f;switch(a.layer.type){case"image":e=a.calculationImageWP(c.linkProportions,c.imageProportions,a.linkElement,a.imageElement),f=a.calculationOfPosition(c.positions,b,d),b.css({top:f.top,left:f.left});break;case"button":a.calculationSP(c.proportions,b,d),f=a.calculationOfPosition(c.positions,b,d),a.setPositions(b,f),b.css({top:f.top,left:f.left});break;case"video":e=a.calculationWHP(c.proportions,b,d),f=a.calculationOfPosition(c.positions,b,d),a.setPositions(b,f),b.css({top:f.top,left:f.left});break;case"youtube":e=a.calculationWHP(c.proportions,b,d),f=a.calculationOfPosition(c.positions,b,d),a.setPositions(b,f),b.css({top:f.top,left:f.left});break;case"vimeo":e=a.calculationWHP(c.proportions,b,d),f=a.calculationOfPosition(c.positions,b,d),a.setPositions(b,f),b.css({top:f.top,left:f.left});break;case"html":b.each(function(g,h){e=a.calculationSP(c.proportions,angular.element(h),d),f=a.calculationOfPosition(c.positions,b,d,!0),b.css({top:f.top,left:f.left})})}}};return{link:function(c,d,e){c.data.settings.editMode||angular.element(a).bind("resize",function(){b(c,d,e)})}}}]),angular.module("motosliderApp").directive("msResizeParallaxElement",["$window",function(a){return{link:function(b,c,d){angular.isDefined(angular.element(c).find("img"))&&angular.element(c.find("img")).ready(function(){d.$set("ms_width",angular.element(c.find("img")).width())}),b.setSize=function(a){c.css({"font-size":a+"px"})},b.setWidth=function(a){c.find("img").css({width:a+"px"})},b.changeElementDimensions=function(){b.setSize(d.msSize/b.factor),angular.isDefined(angular.element(c).find("img"))&&angular.element(c.find("img")).ready(function(){b.setWidth(d.ms_width/b.factor)})},b.$watch(b.getDimensions,function(a){0!==a.height&&0!==a.width&&b.changeElementDimensions()},!0),angular.element(a).bind("resize",function(){b.changeElementDimensions(),b.$apply()})}}}]),angular.module("motosliderApp").directive("msSlide",["$rootScope",function(a){return{restrict:"A",link:function(b,c,d){b.getEnterAnimation=function(){return angular.isUndefined(b.slide.general.animation)||0===b.slide.general.animation.length?"bounceIn":b.slide.general.animation},b.getLeaveAnimation=function(){return angular.isUndefined(b.slide.general.fadeAnimation)||0===b.slide.general.fadeAnimation.length?"rollOut":b.slide.general.fadeAnimation},d.$set("enter-animation",b.getEnterAnimation()),d.$set("leave-animation",b.getLeaveAnimation()),d.$set("duration",b.slide.general.duration),d.$set("easing",b.slide.general.easing);var e=c.closest(".ms_repeater");e.on("webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart",function(b){angular.element(b.target).hasClass("ms_layer")||(a.slideAnimating=!0)}),e.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(c){if(!angular.element(c.target).hasClass("ms_layer")&&(a.slideAnimating=!1,"msSlideFade"===b.data.settings.slideAnimation&&b.slideAnimationDefer.resolve(),e.is(c.target)))if(e.hasClass("ms_current_slide"))"msSlideFade"!==b.data.settings.slideAnimation&&b.slideAnimationDefer.resolve(),e.removeClass(b.getEnterAnimation()),e.css({"-webkit-transform":"translate3D(0, 0, 0)","-moz-transform":"translate3D(0, 0, 0)","-ms-transform":"translate3D(0, 0, 0)",opacity:1}),e.siblings(".ms_slide").css({opacity:0});else{e.removeClass(b.getLeaveAnimation());var d=e.find(".layers>.ms_layer");angular.forEach(d,function(a){angular.element(a).scope().layer.removeShowClasses()})}}),b.isSlideEnter=function(){return b.slide.visible}}}}]),angular.module("motosliderApp").directive("msSlideGradient",[function(){return{restrict:"A",link:function(a,b){a.bgOptions=a.slide.backgrounds.gradient,a.updateGradient=function(){var c=/[0-9]+([^ ,\)`]*)/.exec(a.bgOptions.position)[1],d=90-parseInt(a.bgOptions.position)+c;b.css("background",a.bgOptions.colorInitial).css("background","-moz-linear-gradient("+a.bgOptions.position+",  "+a.bgOptions.colorInitial+" 0%, "+a.bgOptions.colorFinal+" 100%)").css("background","-webkit-linear-gradient("+d+",  "+a.bgOptions.colorInitial+" 0%, "+a.bgOptions.colorFinal+" 100%)").css("background","-o-linear-gradient("+a.bgOptions.position+",  "+a.bgOptions.colorInitial+" 0%, "+a.bgOptions.colorFinal+" 100%)").css("background","-ms-linear-gradient("+a.bgOptions.position+",  "+a.bgOptions.colorInitial+" 0%, "+a.bgOptions.colorFinal+" 100%)").css("background","linear-gradient("+a.bgOptions.position+",  "+a.bgOptions.colorInitial+" 0%, "+a.bgOptions.colorFinal+" 100%)").css("min-height","100%")},a.$watch("bgOptions.position",function(){a.data.settings.editMode&&a.updateGradient()}),a.$watch("bgOptions.colorInitial",function(){a.data.settings.editMode&&a.updateGradient()}),a.$watch("bgOptions.colorFinal",function(){a.data.settings.editMode&&a.updateGradient()}),a.updateGradient(),a.getStyles=function(){}}}}]),angular.module("motosliderApp").directive("msSlideYoutube",["$window",function(){return{restrict:"A",link:function(a,b,c){a.getStyles=function(){return null!==a.slide.src?{"min-height":"100%","min-width":"100%"}:{"min-height":"100%"}},a.getEnterAnimation=function(a){if(angular.isDefined(a)){var b=angular.isUndefined(a.slide.animation)||0===a.slide.animation.length?"bounceIn":a.slide.animation;return b}},a.getLeaveAnimation=function(a){if(angular.isDefined(a)){var b=angular.isUndefined(a.slide.fadeAnimation)||0===a.slide.fadeAnimation.length?"rollOut":a.slide.fadeAnimation;return b}},a.getYoutubeSrc=function(a){var b=a.slide.src.split("="),c=b[1],d=a.slide.controls?1:0;return location.protocol+"//www.youtube.com/embed/"+c+"?enablejsapi=1&autoplay=0&autohide=1&origin=https://www.example.com&controls="+d},c.$set("enter-animation",a.getEnterAnimation(a)),c.$set("leave-animation",a.getLeaveAnimation(a)),c.$set("src",a.getYoutubeSrc(a)),c.$set("type","text/html")}}}]),angular.module("motosliderApp").directive("msSlideColor",[function(){return{restrict:"A",link:function(a){a.bgOptions=a.slide.backgrounds.color,a.$watch("bgOptions.color",function(){return a.data.settings.editMode?{"background-color":a.getColor(a),"min-height":"100%","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover"}:void 0}),a.getStyles=function(){return{"background-color":a.getColor(a),"min-height":"100%","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover"}},a.getColor=function(a){return a.bgOptions.color}}}}]),angular.module("motosliderApp").directive("msSlideImage",["defaults",function(a){return{restrict:"A",link:function(b){b.bgOptions=b.slide.backgrounds.image,b.getBgSlide=function(){var a="url("+b.bgOptions.src+")",c=b.bgOptions.repeat,d="percentage"===b.bgOptions.position?b.bgOptions.positionX+"% "+b.bgOptions.positionY+"%":b.bgOptions.position,e="percentage"===b.bgOptions.fit?b.bgOptions.fitX+"% "+b.bgOptions.fitY+"%":b.bgOptions.fit;return{"min-height":"100%","background-image":a,"background-repeat":c,"background-position":d,"background-size":e,"-webkit-background-size":e,"-moz-background-size":e}},b.$watch("bgOptions.src",function(){return b.data.settings.editMode?b.getBgSlide():void 0}),b.$watch("bgOptions.position",function(){return b.data.settings.editMode?b.getBgSlide():void 0}),b.$watch("bgOptions.repeat",function(){return b.data.settings.editMode?b.getBgSlide():void 0}),b.$watch("bgOptions.fit",function(){return b.data.settings.editMode?b.getBgSlide():void 0}),b.getStyles=function(){return b.bgOptions.src?b.getBgSlide():{"background-color":a.bgColorSlide,"min-height":"100%","-webkit-background-size":b.bgOptions.fit,"-moz-background-size":b.bgOptions.fit,"background-size":b.bgOptions.fit}}}}}]),angular.module("motosliderApp").directive("msSlideVideo",["$sce","$q",function(a,b){return{restrict:"A",link:function(c,d){var e="mpsl-video-bg-cover",f="mpsl-video-bg-cover-",g=!0,h=[],i=b.defer(),j=i.promise,k=!1;c.bgOptions=c.slide.backgrounds.video,c.bgOptions.inited=!1,c.getStyles=function(){var a={};if(angular.isDefined(c.bgOptions._original))switch(c.bgOptions.fillmode){case"fill":var b=0,e=0,f=d.parent().width(),g=d.parent().height(),h=c.bgOptions._original.width/c.bgOptions._original.height*g,i=c.bgOptions._original.height/c.bgOptions._original.width*f;h>=f?(a.width=h+"px",a.height="100%",h>f&&(b=-(h-f)/2)):(a.width="100%",a.height=i+"px",i>g&&(e=-(i-g)/2)),a["min-height"]="100%",a["min-width"]="100%",a["max-width"]="",a["max-height"]="",a.left=b,a.top=e;break;case"fit":var b=0,e=0,f=d.parent().width(),g=d.parent().height(),h=c.bgOptions._original.width/c.bgOptions._original.height*g,i=c.bgOptions._original.height/c.bgOptions._original.width*f;f>=h?(a.width=h+"px",a.height="100%",f>h&&(b=(f-h)/2)):(a.width="100%",a.height=i+"px",g>i&&(e=(g-i)/2)),a["min-height"]="",a["min-width"]="",a["max-height"]="100%",a["max-width"]="100%",a.left=b,a.top=e}return a},c.getSrc=function(b){return angular.isDefined(b)&&0!==b.length?a.trustAsResourceUrl(b):""},c.getType=function(a){switch(a){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg";default:return""}},c.getVideoMute=function(){return c.bgOptions.mute},c.getVideoControls=function(){return c.bgOptions.controls},c.getVideoLoop=function(){return c.bgOptions.loop},c.getCoverTypeClass=function(a){var b=c.bgOptions.cover_type;return angular.isDefined(b)&&0!==b.length?a?" "+f+b:f+b:""},c.deleteSourcesHtml=function(a){a.find("source").remove()},c.addSourcesHtml=function(a){angular.forEach(c.bgOptions.sources,function(b,d){if(angular.isDefined(b)&&""!==b){var e=angular.element("<source />",{src:c.getSrc(b),type:c.getType(d)});a.append(e)}})},c.$watch("bgOptions.sources",function(){if(c.data.settings.editMode&&c.bgOptions.inited){delete c.bgOptions._original;var a=d.find("video");c.deleteSourcesHtml(a),c.addSourcesHtml(a),a[0].load()}},!0),c.$watch("bgOptions.cover",function(){c.data.settings.editMode&&c.bgOptions.inited&&(c.bgOptions.cover?c.addCoverIfNotExist():c.removeCover())}),c.$watch("bgOptions.cover_type",function(){c.data.settings.editMode&&c.bgOptions.inited&&c.setCoverType()}),c.$watch("bgOptions.fillmode",function(){c.data.settings.editMode&&c.updateStyle()}),c.removeCover=function(){d.find("."+e).remove()},c.addCoverIfNotExist=function(){if(!d.find("."+e).length){var a=angular.element("<div />",{"class":e+c.getCoverTypeClass(!0)});d.append(a)}},c.setCoverType=function(){var a=c.getCoverTypeClass();d.find("."+e).removeClass().addClass(e).addClass(a)},c.updateStyle=function(){d.css(c.getStyles())};var l=angular.element("<video />",{preload:"metadata",controls:!1,loop:c.getVideoLoop()});c.getVideoMute()&&(l[0].muted=c.getVideoMute()),(c.data.settings.editMode||!c.bgOptions.autoplay)&&l.removeAttr("autoplay"),l.on("loadedmetadata",function(a){c.bgOptions._original={},c.bgOptions._original.width=a.target.videoWidth,c.bgOptions._original.height=a.target.videoHeight,c.updateStyle(),i.resolve()}),c.isThisSlideCurrent(d)&&h.push(j),c.bgOptions.cover&&(c.addCoverIfNotExist(),c.setCoverType()),angular.element(window).on("resize",function(){c.updateStyle()}),c.bgOptions.inited=!0,c.$watch("currentIndex",function(){parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(c.currentIndex)&&(k||(k=!0,c.addSourcesHtml(l),d.append(l)),!c.data.settings.editMode&&c.bgOptions.autoplay&&c.isThisSlideCurrent(d)&&b.when(j).then(function(){l[0].play()}))});var m=b.defer();b.all(h).then(function(){g=!1,m.resolve()}),c.deferred.push(m.promise)}}}]),angular.module("motosliderApp").directive("msSlideParallax",[function(){return{restrict:"A",link:function(a,b,c){a.getStyles=function(){return{height:a.data.settings.height+"px"}},a.getEnterAnimation=function(a){if(angular.isDefined(a)){var b=angular.isUndefined(a.slide.animation)||0===a.slide.animation.length?"bounceIn":a.slide.animation;return b}},a.getLeaveAnimation=function(a){if(angular.isDefined(a)){var b=angular.isUndefined(a.slide.fadeAnimation)||0===a.slide.fadeAnimation.length?"rollOut":a.slide.fadeAnimation;return b}},a.getVideoControls=function(a){return a.slide.controls},a.getjKitAttributes=function(a){return"[parallax:strength="+a.slide.parallaxSettings.strength+";axis="+a.slide.parallaxSettings.axis+";detect="+a.slide.parallaxSettings.detect+";scope=local;]"},a.setBackgroundParallax=function(a){a.slide.parallaxSettings.background.match(/#/)?b.css("background",a.slide.parallaxSettings.background):b.css("background","url("+a.slide.parallaxSettings.background+")")},c.$set("enter-animation",a.getEnterAnimation(a)),c.$set("leave-animation",a.getLeaveAnimation(a)),b.attr("data-jkit",a.getjKitAttributes(a)),a.setBackgroundParallax(a),angular.element(a.getCurrentScope()).jKit()}}}]),angular.module("motosliderApp").directive("msVideoSource",[function(){return{restrict:"A",link:function(a,b,c){a.data.settings.editMode&&a.$watch("slide.src",function(){}),a.getSrc=function(a){return a.slide.src},a.getType=function(a){return a.slide.format},c.$set("src",a.getSrc(a)),c.$set("type",a.getType(a))}}}]),angular.module("motosliderApp").directive("msLayer",["$sce","$timeout","defaults","$q",function(a,b,c){return{restrict:"A",link:function(a,b){a.layer.status="created",a.data.settings.editMode||(b.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(d){b.is(d.target)&&("leaving"!==a.layer.status?b.removeClass(c.layerHideClass).addClass(c.layerShowClass).removeClass(a.layer.animation):b.removeClass(c.layerShowClass).addClass(c.layerHideClass).removeClass(a.layer.leaveAnimation))
}),b.on("webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart",function(a){b.is(a.target)&&b.removeClass(c.layerHideClass).removeClass(c.layerShowClass)}),b.on("dragstart",function(){return!1})),a.layer.removeShowClasses=function(){b.removeClass(c.layerShowClass)},a.layer.leave=function(){"leaving"!==a.layer.status&&(a.layer.status="leaving",a.addLeaveLayerAnimation(b,a.layer),a.layer.timingFunction&&b.removeClass(a.layer.timingFunction),a.layer.leaveTimingFunction&&b.addClass(a.layer.leaveTimingFunction),a.layer.leaveDuration&&angular.element(b).css({"-webkit-animation-duration":a.ms(a.layer.leaveDuration),"animation-duration":a.ms(a.layer.leaveDuration)}))},a.layer.enter=function(){a.layer.status="entering",a.addEnterLayerAnimation(b,a.layer),a.layer.leaveTimingFunction&&b.removeClass(a.layer.leaveTimingFunction),a.layer.timingFunction&&b.addClass(a.layer.timingFunction),a.layer.duration&&angular.element(b).css({"-webkit-animation-duration":a.ms(a.layer.duration),"animation-duration":a.ms(a.layer.duration)})}}}}]),angular.module("motosliderApp").directive("msTextLayer",["$timeout","$sce","defaults",function(a,b,c){return{restrict:"A",link:function(b,d,e){b.$watch("layer.title",function(){b.data.settings.editMode&&d.text(b.layer.title)}),b.$watch("layer.classes",function(){b.data.settings.editMode&&(d.removeClass(),d.addClass("ms_text_layer "+b.layer.classes))}),b.$watch("layer.position",function(){b.data.settings.editMode&&b.setTextOffsets(b.layer,d)});var f=d.parents(".ms_wrapper"),g=f.outerHeight(),h=f.outerWidth(),i=g/2,j=h/2,k=d;b.manipulate=function(a){for(var c in a)a.hasOwnProperty(c)&&(b.layer[c]=a[c]);b.$apply()},b.delete=function(a){b.data.slides[0].layers.splice(a.$index,1),b.$apply()},b.getTextEnterAnimationLayer=function(a){return a.animation},b.getTextLeaveAnimationLayer=function(a){return a.leaveAnimation},b.getLeaveDelayAnimationLayer=function(a){return a.leaveDelay},b.pixelerize=function(a){return parseInt(a*b.factor)+"px"},b.setTextOffsets=function(a,c){var d,f,g=a.position,h=b.factor>1?1:b.factor;angular.element(c).ready(function(){b.data.settings.editMode||(e.$set("font-size",c.css("font-size").slice(0,-2)),e.$set("padding-top",c.css("padding-top").slice(0,-2)),e.$set("padding-right",c.css("padding-right").slice(0,-2)),e.$set("padding-bottom",c.css("padding-bottom").slice(0,-2)),e.$set("padding-left",c.css("padding-left").slice(0,-2)),angular.element(c).css({"font-size":parseInt(c.css("font-size").slice(0,-2)*h)+"px","padding-top":parseInt(angular.element(c).css("padding-top").slice(0,-2)*h)+"px","padding-right":parseInt(angular.element(c).css("padding-right").slice(0,-2)*h)+"px","padding-bottom":parseInt(angular.element(c).css("padding-bottom").slice(0,-2)*h)+"px","padding-left":parseInt(angular.element(c).css("padding-left").slice(0,-2)*h)+"px"}));var a=k.outerHeight(),l=k.outerWidth();0===parseInt(g.offsetTop)||angular.isUndefined(g.offsetTop)?d=i*g.offsetBottom/100-a+"px":(0===parseFloat(g.offsetBottom)||angular.isUndefined(g.offsetBottom))&&(d=-1*(i*g.offsetTop/100)+"px"),0===parseInt(g.offsetLeft)||angular.isUndefined(g.offsetLeft)?f=j*g.offsetRight/100-l-1+"px":(0===parseFloat(g.offsetRight)||angular.isUndefined(g.offsetRight))&&(f=-1*(j*g.offsetLeft/100)+"px"),e.$set("margin-top",parseInt(d.slice(0,-2))),e.$set("margin-left",parseInt(f.slice(0,-2))),e.$set("offset-top",g.offsetTop),e.$set("offset-bottom",g.offsetBottom),e.$set("offset-left",g.offsetLeft),e.$set("offset-right",g.offsetRight),c.css({"margin-top":d,"margin-left":f})}),b.data.settings.editMode||c.css({"-webkit-animation-delay":b.delayValidation(b.layer.delay),"animation-delay":b.delayValidation(b.layer.delay)})},b.percentage=function(a){return parseInt(a)+"%"},b.delayValidation=function(a){return parseInt(a)+"ms"},b.data.settings.editMode?(d.addClass("ms_visible"),d.text(b.layer.title),d.addClass(b.layer.classes),b.setTextOffsets(b.layer,d),d.css({opacity:1})):(setTimeout(function(){d.addClass("ms_visible")},parseInt(b.layer.delay)),e.$set("leave-delay",b.getLeaveDelayAnimationLayer(b.layer)),d.addClass(b.layer.classes),d.text(b.layer.title),b.setTextOffsets(b.layer,d),d.addClass(c.animatedClass+" "+b.layer.animation));var l=b.layer.leaveAnimation;b.$watch("[data.settings.timer, currentIndex]",function(){parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(b.currentIndex)&&(f.hasClass("applySlides")||b.data.settings.editMode||b.layer.enter()),b.data.settings.timer?parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(b.currentIndex)&&(f.hasClass("applySlides")||d.addClass(b.layer.animation),b.layerTimerLeaveText=a(function(){d.removeClass(b.layer.animation),d.addClass(l),f.not(".turnApply")&&f.addClass("turnApply"),f.addClass("applySlides"),angular.element(d).css({"-webkit-animation-delay":"500ms","animation-delay":"500ms"}),a.cancel(b.layerTimerLeaveText)},null===b.layer.leaveDelay?b.timerSeconds-1500:b.layer.leaveDelay)):(a.cancel(b.layerTimerLeaveText),null!==b.layer.leaveDelay&&parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(b.currentIndex)&&(f.hasClass("applySlides")||b.data.settings.editMode||d.addClass(b.layer.animation),b.data.settings.editMode||(b.layerTimerLeaveText=a(function(){d.removeClass(b.layer.animation),d.addClass(l),f.not(".turnApply")&&f.addClass("turnApply"),f.addClass("applySlides"),a.cancel(b.layerTimerLeaveText)},b.layer.leaveDelay))))},!0)}}}]),angular.module("motosliderApp").directive("msImageLayer",["$timeout","$rootScope","$q","defaults",function(a,b,c){return{restrict:"A",link:function(b,d,e){var f=!0,g=[],h=[];b.linkElement=null,b.imageElement=null,"A"==d[0].tagName?(b.linkElement=d,b.imageElement=d.find("img"),b.layer.link||(b.layer.linkClasses="")):b.imageElement=d;var i=c.defer();if(b.imageElement.on("load",function(){var b=a(function(){i.resolve(),a.cancel(b)},100)}),b.layer.src.length?b.imageElement[0].addEventListener("error",function(){i.resolve()}):i.resolve(),b.$watch("layer.src",function(){b.data.settings.editMode&&(b.imageElement.attr("src",b.layer.src),h.push(i.promise))}),b.layer.clArr1=[],b.$watch("layer.classes",function(){if(b.data.settings.editMode){b.layer.classes&&b.layer.clArr1.push(b.layer.classes),b.layer.clArr1.forEach(function(a){b.imageElement.removeClass(a)}),b.imageElement.attr("style",""),b.layer.classes&&b.imageElement.addClass(b.layer.classes),e.$set("positions",b.layer.position);var a=c.defer();b.setElementPosition(d,b.layer,a),h.push(a.promise)}}),b.layer.clArr2=[],b.$watch("layer.linkClasses",function(){if(b.data.settings.editMode){b.layer.linkClasses&&b.layer.clArr2.push(b.layer.linkClasses),b.layer.clArr2.forEach(function(a){b.linkElement.removeClass(a)}),b.linkElement.attr("style",""),b.linkElement.addClass("ms_image_layer"),b.layer.linkClasses&&b.linkElement.addClass(b.layer.linkClasses),e.$set("positions",b.layer.position),b.linkElement.css("opacity","1");var a=c.defer();b.setElementPosition(d,b.layer,a),h.push(a.promise)}}),b.$watch("layer.width",function(){b.data.settings.editMode&&b.imageElement.css({width:b.layer.width})}),b.linkElement&&b.layer.link&&b.linkElement.addClass(b.layer.linkClasses),b.imageElement.addClass(b.layer.classes),b.manipulate=function(a){var c,e,f,g=!1;(a.hasOwnProperty("link")&&!a.link||!a.hasOwnProperty("link")&&!b.layer.link)&&(a.linkClasses="");for(var h in a)c=!("undefined"==typeof a[h]||""===a[h]||null===a[h]),e=!("undefined"==typeof b.layer[h]||""===b.layer[h]||null===b.layer[h]),f=!c&&!e,g||f||angular.equals(b.layer[h],a[h])||(g=!0),b.layer[h]=a[h];g?b.$apply():d.parent().trigger("MPSLLayerChange")},b.delete=function(a){b.data.slides[0].layers.splice(a.$index,1),b.$apply()},b.getImageEnterAnimationLayer=function(a){return a.animation},b.getImageLayer=function(a){return a.leaveAnimation},b.getLeaveDelayAnimationLayer=function(a){return a.leaveDelay},b.imageElement.attr("src",b.layer.src),b.imageElement.css("width",b.layer.width*b.factor),b.linkElement&&(e.$set("target",b.layer.target),e.$set("href",b.layer.link)),b.data.settings.editMode)d.addClass("ms_visible"),d.css({opacity:1});else{var j=c.defer();setTimeout(function(){d.addClass("ms_visible"),j.resolve()},parseInt(b.layer.delay)),e.$set("leave-delay",b.getLeaveDelayAnimationLayer(b.layer)),b.addLayerAnimation(b.layer,d)}b.linkElement&&e.$set("linkProportions",{"padding-top":b.slice(b.linkElement.css("padding-top")),"padding-right":b.slice(b.linkElement.css("padding-right")),"padding-bottom":b.slice(b.linkElement.css("padding-bottom")),"padding-left":b.slice(b.linkElement.css("padding-left")),"border-top-width":b.slice(b.linkElement.css("border-top-width")),"border-right-width":b.slice(b.linkElement.css("border-right-width")),"border-left-width":b.slice(b.linkElement.css("border-left-width")),"border-bottom-width":b.slice(b.linkElement.css("border-bottom-width")),"letter-spacing":b.px(b.linkElement.css("letter-spacing")),"line-height":b.px(b.linkElement.css("line-height"))}),e.$set("imageProportions",{width:b.layer.width,"padding-top":b.slice(b.imageElement.css("padding-top")),"padding-right":b.slice(b.imageElement.css("padding-right")),"padding-bottom":b.slice(b.imageElement.css("padding-bottom")),"padding-left":b.slice(b.imageElement.css("padding-left")),"border-top-width":b.slice(b.imageElement.css("border-top-width")),"border-right-width":b.slice(b.imageElement.css("border-right-width")),"border-left-width":b.slice(b.imageElement.css("border-left-width")),"border-bottom-width":b.slice(b.imageElement.css("border-bottom-width")),"letter-spacing":b.px(b.imageElement.css("letter-spacing")),"line-height":b.px(b.imageElement.css("line-height"))}),e.$set("positions",b.layer.position);var k=c.defer();c.when(i.promise).then(function(){b.data.settings.editMode||b.calculationImageWP(e.linkProportions,e.imageProportions,b.linkElement,b.imageElement),b.setPositions(d,b.calculationOfPosition(b.layer.position,d,d.parents("#"+b.getCurrentScope()))),k.resolve()}),g.push(k.promise),b.$watch("[data.settings.timer, currentIndex]",function(){parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(b.currentIndex)?b.data.settings.editMode||b.layer.applyLeave&&(b.layer.enter(),b.layer.applyLeave=!1):b.layer.applyLeave=!0,b.data.settings.timer?parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(b.currentIndex)&&(a.cancel(b.layer.layerTimerLeave),b.applyLAnimation(b,d)):(a.cancel(b.layer.layerTimerLeave),null!==b.layer.leaveDelay&&parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(b.currentIndex)&&(b.data.settings.editMode||(b.layer.layerTimerLeave=a(function(){b.layer.applyLeave=!1,a.cancel(b.layer.layerTimerLeave)},b.layer.leaveDelay))))},!0);var l=c.defer();c.all(g).then(function(){l.resolve(),i=c.defer(),d.parent().trigger("MPSLLayerCreate")}),b.deferred.push(l.promise),b.data.settings.editMode&&b.$watchCollection("[layer.src, layer.classes, layer.width, layer.link, layer.linkClasses]",function(){f?f=!1:c.all(h).then(function(){d.parent().trigger("MPSLLayerChange"),h=[],i=c.defer()})})}}}]),angular.module("motosliderApp").directive("msButtonLayer",["$timeout","$q","defaults",function(a,b){return{restrict:"A",link:function(c,d,e){var f=!0,g=[],h=[];c.$watch("layer.title",function(){c.data.settings.editMode&&d.text(c.layer.title)}),c.layer.clArr=[],c.$watch("layer.classes",function(){if(c.data.settings.editMode){c.layer.clArr.push(c.layer.classes),c.layer.clArr.forEach(function(a){d.removeClass(a)}),d.attr("style",""),d.addClass("ms_button_layer "+c.layer.classes),e.$set("positions",c.layer.position),d.css("opacity","1");var a=b.defer();c.setElementPosition(d,c.layer,a),h.push(a.promise)}}),c.$watch("layer.link",function(){c.data.settings.editMode&&e.$set("href",c.layer.link)}),c.$watch("layer.target",function(){c.data.settings.editMode&&e.$set("target",c.layer.target)}),d.addClass(c.layer.classes);{var i=d.parents("#"+c.getCurrentScope());i.outerHeight(),i.outerWidth()}c.manipulate=function(a){var b=!1;for(var e in a)b||angular.equals(c.layer[e],a[e])||(b=!0),c.layer[e]=a[e];b?c.$apply():d.parent().trigger("MPSLLayerChange")},c.delete=function(a){c.data.slides[0].layers.splice(a.$index,1),c.$apply()},d.addClass(c.layer.classes),d.text(c.layer.title),d.addClass("ms_visible"),e.$set("target",c.layer.target),e.$set("href",c.layer.link),c.data.settings.editMode?d.css({opacity:1}):(d.addClass("ms_visible"),c.addLayerAnimation(c.layer,d)),e.$set("proportions",{"font-size":c.slice(d.css("font-size")),"padding-top":c.slice(d.css("padding-top")),"padding-right":c.slice(d.css("padding-right")),"padding-bottom":c.slice(d.css("padding-bottom")),"padding-left":c.slice(d.css("padding-left")),"line-height":c.slice(d.css("line-height")),"border-top-width":c.slice(d.css("border-top-width")),"border-right-width":c.slice(d.css("border-right-width")),"border-left-width":c.slice(d.css("border-left-width")),"border-bottom-width":c.slice(d.css("border-bottom-width")),"letter-spacing":c.slice(d.css("letter-spacing"))}),c.setProportions(d),e.$set("positions",c.layer.position);var j=b.defer();c.setElementPosition(d,c.layer,j),g.push(j.promise),c.$watch("[data.settings.timer, currentIndex]",function(){parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(c.currentIndex)?c.data.settings.editMode||c.layer.applyLeave&&(c.layer.enter(),c.layer.applyLeave=!1):c.layer.applyLeave=!0,c.data.settings.timer?parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(c.currentIndex)&&(a.cancel(c.layer.layerTimerLeave),c.applyLAnimation(c,d)):(a.cancel(c.layer.layerTimerLeave),null!==c.layer.leaveDelay&&parseInt(d.parents(".ms_repeater").data("currentIndex"))===parseInt(c.currentIndex)&&(c.data.settings.editMode||(c.layer.layerTimerLeave=a(function(){c.layer.applyLeave=!1,a.cancel(c.layer.layerTimerLeave)},c.layer.leaveDelay))))},!0);var k=b.defer();b.all(g).then(function(){k.resolve(),d.parent().trigger("MPSLLayerCreate")}),c.deferred.push(k.promise),c.data.settings.editMode&&c.$watchCollection("[layer.title, layer.classes, layer.link, layer.target]",function(){f?f=!1:b.all(h).then(function(){d.parent().trigger("MPSLLayerChange"),h=[]})})}}}]),angular.module("motosliderApp").directive("msVideoLayer",["$timeout","$sce","$q","defaults","$http",function(a,b,c,d){return{restrict:"A",link:function(e,f,g){var h=!0,i=[],j=[],k=!1,l=c.defer(),m=l.promise,n=!1,o=!0,p=f.children("video");e.arrVideoPlayersState[e.$id]=p[0],e.layer.typeChanged=e.layer.hasOwnProperty("typeChanged")&&e.layer.typeChanged;var q=!0;e.getVideoEnterAnimationLayer=function(a){return a.animation},e.getVideoLeaveAnimationLayer=function(a){return a.leaveAnimation},e.pixelerize=function(a){return parseInt(a)+"px"},e.currentTimer&&(p.on("play",function(){e.data.settings.editMode||e.appliedPauses||e.stopPlayingTimer()}),p.on("pause",function(){e.data.settings.editMode||!e.checkAllPlayers()||e.appliedPauses||e.startPlayingTimer()})),e.$watch("layer.controls",function(){e.data.settings.editMode&&p.attr("controls",e.layer.controls)}),e.layer.clArr=[],e.$watch("layer.classes",function(){if(e.data.settings.editMode){e.layer.classes&&e.layer.clArr.push(e.layer.classes),e.layer.clArr.forEach(function(a){f.removeClass(a)}),f.attr("style",""),f.addClass("ms_video_layer"),e.layer.classes&&f.addClass(e.layer.classes),g.$set("positions",e.layer.position),f.css("opacity","1");var a=c.defer();e.setElementPosition(f,e.layer,a),j.push(a.promise)}});var r=function(){if(!k||e.data.settings.editMode){k=!0,p.empty();var a=0;if(angular.forEach(e.layer.sources,function(b){b&&a++}),a){var b="",d=0;for(var f in e.layer.sources)e.layer.sources[f]&&(b+="<source src='"+e.layer.sources[f]+"' type='"+e.getType(e.layer.sources[f])+"'>");p.append(b),p.children("source").each(function(){angular.element(this).one("error",function(){d++,d===a&&(l.resolve(),l=c.defer())})})}else l.resolve(),l=c.defer();p[0].load(),q=!1}};e.pauseVideo=function(){k&&c.when(m).then(function(){p[0].pause()}),e.layer.autoplay&&n&&(o=!1)},e.seekTo=function(a){k&&c.when(m).then(function(){p[0].currentTime!=a&&(p[0].currentTime=a)})},e.data.settings.editMode||e.addLayerAnimation(e.layer,f),p.on("loadedmetadata",function(){l.resolve(),l=c.defer()}),e.isThisSlideCurrent(f)&&q&&i.push(m),e.$watch("layer.sources",function(){e.data.settings.editMode&&(j.push(l.promise),r())},!0),e.$watch("layer.width",function(){e.data.settings.editMode&&(f.css("width",e.layer.width),g.$set("positions",e.layer.position),e.setPositions(f,e.calculationOfPosition(e.layer.position,f,f.parents("#"+e.getCurrentScope()))))}),e.$watch("layer.height",function(){e.data.settings.editMode&&(f.css({height:e.layer.height}),g.$set("positions",e.layer.position),e.setPositions(f,e.calculationOfPosition(e.layer.position,f,f.parents("#"+e.getCurrentScope()))))});var s;e.$watch("layer.poster",function(){e.data.settings.editMode&&(p.attr("poster",e.layer.poster),p.hide(),s=a(function(){p.show(),a.cancel(s)},0))}),e.data.settings.editMode||(e.animEndListener=function(){e.isThisSlideCurrent(f)?e.layer.autoplay&&!n&&(c.when(m).then(function(){o&&(p.attr("autoplay",e.layer.autoplay),p[0].play())}),n=!0):p.attr("autoplay",!1)},angular.forEach(d.leaveEventNamesArr,function(a){f[0].addEventListener(a,e.animEndListener,!1)})),e.manipulate=function(a){var b=!1;a.hasOwnProperty("type")&&!angular.equals(e.layer.type,a.type)&&(e.layer.typeChanged=!0);for(var c in a)b||angular.equals(e.layer[c],a[c])||(b=!0),e.layer[c]=a[c];b?e.$apply():f.parent().trigger("MPSLLayerChange")},e.delete=function(a){e.data.slides[0].layers.splice(a.$index,1),e.$apply()},e.getSrc=function(a){return angular.isDefined(a)?0!==a.length?b.trustAsResourceUrl(a):"":void 0},e.getType=function(a){if(angular.isDefined(a)){var b,c,d=a.split(".").pop();return d=d.split("?")[0].split("#")[0],b="webm"===d?' codecs="vp8.0, vorbis"':"mp4"===d?' codecs="theora, vorbis"':' codecs="avc1.4D401E, mp4a.40.2"',c=0!==a.length?"video/"+("ogv"===d?"ogg;":d+";"):""}},e.getVideoAutoplay=function(a){return a.autoplay},e.getVideoControls=function(a){return a.controls},e.getVideoLoop=function(a){return a.loop},e.getVideoMuted=function(a){return a.mute},e.percentage=function(a){return parseInt(a)+"%"},e.delayValidation=function(a){return parseInt(a)+"ms"},e.getWidth=function(a){return a.width},e.setVideoAttrs=function(){e.currentVideoAttrs={controls:e.layer.controls,loop:e.layer.loop,poster:e.layer.poster};for(var a in e.currentVideoAttrs)e.currentVideoAttrs[a]&&p.attr(a,e.currentVideoAttrs[a]);p[0].muted=e.layer.mute},f.addClass(e.layer.classes),e.data.settings.editMode?(p[0].pause(),p.attr("controls",e.getVideoControls(e.layer)),p.attr("poster",e.layer.poster),f.css("opacity",1)):(f.css("width",e.layer.width*e.factor),f.css("height",e.layer.height*e.factor),e.setVideoAttrs()),g.$set("proportions",{width:e.layer.width,height:e.layer.height,"padding-top":e.slice(f.css("padding-top")),"padding-right":e.slice(f.css("padding-right")),"padding-bottom":e.slice(f.css("padding-bottom")),"padding-left":e.slice(f.css("padding-left")),"border-top-width":e.slice(f.css("border-top-width")),"border-right-width":e.slice(f.css("border-right-width")),"border-left-width":e.slice(f.css("border-left-width")),"border-bottom-width":e.slice(f.css("border-bottom-width"))}),e.setProportions(f),g.$set("positions",e.layer.position),e.setPositions(f,e.calculationOfPosition(e.layer.position,f,f.parents("#"+e.getCurrentScope())));var t=c.defer();c.when(m).then(function(){e.setPositions(f,e.calculationOfPosition(e.layer.position,f,f.parents("#"+e.getCurrentScope()))),t.resolve()}),e.isThisSlideCurrent(f)&&i.push(t.promise),e.$watch("currentIndex",function(){e.isThisSlideCurrent(f)&&(e.data.settings.editMode||e.layer.autoplay&&!n&&e.stopPlayingTimer())});e.layer.leaveAnimation;e.$watch("[data.settings.timer, currentIndex]",function(){e.isThisSlideCurrent(f)&&q&&r(),parseInt(f.parents(".ms_repeater").data("currentIndex"))===parseInt(e.currentIndex)?e.data.settings.editMode||e.layer.applyLeave&&(e.animationDelaySet=!1,e.layer.enter(),e.setVideoAttrs(),e.layer.applyLeave=!1):e.layer.applyLeave=!0,e.data.settings.timer?parseInt(f.parents(".ms_repeater").data("currentIndex"))===parseInt(e.currentIndex)&&(a.cancel(e.layer.layerTimerLeave),e.layer.autoplay&&!n&&e.stopPlayingTimer(),e.applyLAnimation(e,f)):(a.cancel(e.layer.layerTimerLeave),null!==e.layer.leaveDelay&&parseInt(f.parents(".ms_repeater").data("currentIndex"))===parseInt(e.currentIndex)&&(e.data.settings.editMode||(e.layer.layerTimerLeave=a(function(){e.layer.applyLeave=!1,a.cancel(e.layer.layerTimerLeave)},e.layer.leaveDelay))))},!0);var u=c.defer();c.all(i).then(function(){u.resolve(),f.parent().trigger(e.layer.typeChanged?"MPSLLayerChange":"MPSLLayerCreate")}),e.deferred.push(u.promise),e.data.settings.editMode&&e.$watch("[layer.type, layer.sources, layer.width, layer.height, layer.controls, layer.classes, layer.poster]",function(){h?h=!1:c.all(j).then(function(){f.parent().trigger("MPSLLayerChange"),j=[]})},!0)}}}]),angular.module("motosliderApp").directive("msVideoLayerSource",[function(){return{restrict:"A",link:function(a,b,c){a.getSrc=function(a){return a.layer.src},a.getType=function(a){return a.layer.type},c.$set("format",a.getType(a)),c.$set("src",a.getSrc(a))}}}]),angular.module("motosliderApp").directive("msYoutubeLayer",["defaults","$timeout","$q","$interval","$http",function(a,b,c){return{restrict:"A",link:function(d,e,f){var g,h=!0,i=[],j=[],k=e.find("iframe"),l=c.defer(),m=l.promise,n=!1,o=!0,p=!0;d.layer.default_preview_image=a.info.path+a.videoBackground,d.layer.typeChanged=d.layer.hasOwnProperty("typeChanged")&&d.layer.typeChanged;var q=d.layer.autoplay||d.data.settings.editMode;d.getYoutubeEnterAnimationLayer=function(a){return a.animation},d.getYoutubeLeaveAnimationLayer=function(a){return a.leaveAnimation},d.pixelerize=function(a){return parseInt(a)+"px"},d.layer.clArr=[],d.$watch("layer.classes",function(){if(d.data.settings.editMode){d.layer.classes&&d.layer.clArr.push(d.layer.classes),d.layer.clArr.forEach(function(a){e.removeClass(a)}),e.attr("style",""),e.addClass("ms_youtube_layer"),d.layer.classes&&e.addClass(d.layer.classes),f.$set("positions",d.layer.position),e.css("opacity","1");var a=c.defer();d.setElementPosition(e,d.layer,a),j.push(a.promise)}});var r=c.defer();k.on("load",function(){r.resolve(),r=c.defer()});var s=r.promise;d.isThisSlideCurrent(e)&&q&&i.push(s),d.data.settings.editMode&&d.$watch("layer.src",function(){k.attr("src",d.getYoutubeSrc(d.layer)),s=r.promise,j.push(s)}),d.$watch("layer.poster",function(){d.data.settings.editMode&&d.setPreviewImage()}),d.$watch("layer.width",function(){d.data.settings.editMode&&(e.css({width:d.layer.width}),f.$set("positions",d.layer.position),d.setPositions(e,d.calculationOfPosition(d.layer.position,e,e.parents("#"+d.getCurrentScope()))))}),d.$watch("layer.height",function(){d.data.settings.editMode&&(e.css({height:d.layer.height}),f.$set("positions",d.layer.position),d.setPositions(e,d.calculationOfPosition(d.layer.position,e,e.parents("#"+d.getCurrentScope()))))}),d.$watch("layer.controls",function(){d.data.settings.editMode&&k.attr("src",d.getYoutubeSrc(d.layer))}),d.manipulate=function(a){var b=!1;a.hasOwnProperty("type")&&!angular.equals(d.layer.type,a.type)&&(d.layer.typeChanged=!0);for(var c in a)b||angular.equals(d.layer[c],a[c])||(b=!0),d.layer[c]=a[c];b?d.$apply():e.parent().trigger("MPSLLayerChange")},d.setPreviewImage=function(){d.layer.preview_image=d.layer.poster.length?d.layer.poster:d.layer.default_preview_image},d.clickPreviewButton=function(){o=g||!d.detectMobile,d.stopPlayingTimer(),v(),c.when(m).then(function(){d.hidePreviewImage(),o&&(d.seekTo(0),g.playVideo())})},d.hidePreviewImage=function(){var a=e.find(".ms_youtube_layer_preview_image");a.addClass("hidden")},d.showPreviewImage=function(){var a=e.find(".ms_youtube_layer_preview_image");a.removeClass("hidden")},d.onLeaveSlide=function(){d.showPreviewImage()},d.delete=function(a){d.data.slides[0].layers.splice(a.$index,1),d.$apply()},d.percentage=function(a){return parseInt(a)+"%"},d.delayValidation=function(a){return parseInt(a)+"ms"},d.getWidth=function(b){return angular.isUndefined(b.width)||0===b.width.length?a.widthYoutube:b.width},d.getHeight=function(b){return angular.isUndefined(b.height)||0===b.height.length?a.heightYoutube:b.height},d.getYoutubeId=function(){var a,b=d.layer,c=b.src.match(/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/))([^\?&\"\'>]+)/);if(null===c){var e=b.src.match(/^[A-za-z0-9_-]{11}$/);a=null!==e?e[0]:""}else a=angular.isArray(c)&&angular.isDefined(c[1])?c[1]:"";return a},d.getYoutubeSrc=function(){var a=d.getYoutubeId(),b=d.layer.controls?1:0,c="";return location.protocol+"//www.youtube.com/embed/"+a+"?html5=1&enablejsapi=1&fs=1&rel=0&showinfo=0&controls="+b+c},k.attr("frameborder",0),k.attr("webkitallowfullscreen",!0),k.attr("mozallowfullscreen",!0),k.attr("allowfullscreen",!0),d.data.settings.editMode?e.css("opacity",1):(d.setPreviewImage(),d.addLayerAnimation(d.layer,e),e.addClass(d.layer.classes),e.css({width:d.layer.width*d.factor,height:d.layer.height*d.factor}),"undefined"==typeof window.youtubeShow&&(window.youtubeShow=!0));var t={width:d.layer.width,height:d.layer.height,"padding-top":d.slice(e.css("padding-top")),"padding-right":d.slice(e.css("padding-right")),"padding-bottom":d.slice(e.css("padding-bottom")),"padding-left":d.slice(e.css("padding-left")),"border-top-width":d.slice(e.css("border-top-width")),"border-right-width":d.slice(e.css("border-right-width")),"border-left-width":d.slice(e.css("border-left-width")),"border-bottom-width":d.slice(e.css("border-bottom-width"))};f.$set("proportions",t),d.setProportions(e),f.$set("positions",d.layer.position);var u=c.defer();d.setElementPosition(e,d.layer,u),d.isThisSlideCurrent(e)&&i.push(u.promise);var v=function(){"undefined"==typeof g&&(g=!0,k.attr("src",d.getYoutubeSrc(d.layer)),d.loadYoutubeApiScript(),c.all([window.mpslYTApiReady,s]).then(function(){g=new YT.Player(k[0].id),x(!0),q=!1}))};if(d.pauseVideo=function(a){angular.isUndefined(a)&&(a=!0),g&&c.when(m).then(function(){g.pauseVideo(),a&&d.showPreviewImage()}),d.layer.autoplay&&n&&(p=!1)},d.seekTo=function(a){g&&g.seekTo(a,!0)},d.applyPreferences=function(a){d.layer.mute?a.mute():a.unMute()},d.onReady=function(a){d.data.settings.editMode||(d.applyPreferences(a.target),d.arrYoutubePlayersState[k[0].id]=g.getPlayerState()),l.resolve()},d.onStateChange=function(a,b){d.arrYoutubePlayersState[k[0].id]=b.data,a&&(b.data===YT.PlayerState.PLAYING||b.data===YT.PlayerState.BUFFERING?d.data.settings.editMode||d.appliedPauses||d.stopPlayingTimer():b.data!==YT.PlayerState.PAUSED&&b.data!==YT.PlayerState.ENDED||!d.checkAllPlayers()||d.appliedPauses||d.data.settings.editMode||d.startPlayingTimer()),b.data===YT.PlayerState.ENDED&&d.layer.loop&&g.seekTo(0)},!d.data.settings.editMode){var w=function(){d.isThisSlideCurrent(e)&&d.layer.autoplay&&!n&&(c.when(m).then(function(){p&&(d.hidePreviewImage(),g.playVideo())}),n=!0)};angular.forEach(a.leaveEventNamesArr,function(a){e[0].addEventListener(a,w,!1)})}var x=function(a){g.addEventListener("onReady",d.onReady),g.addEventListener("onStateChange",d.onStateChange.bind(void 0,a)),g.addEventListener("onError",function(){})};d.$watch("currentIndex",function(){d.isThisSlideCurrent(e)?d.data.settings.editMode||(d.layer.autoplay&&!n&&d.stopPlayingTimer(),angular.isDefined(d.slideLeaved)&&d.slideLeaved&&(d.slideLeaved=!1)):d.slideLeaved||(d.onLeaveSlide(),d.slideLeaved=!0)}),d.$watch("[data.settings.timer, currentIndex]",function(){d.isThisSlideCurrent(e)?(q&&v(),d.data.settings.editMode||d.layer.applyLeave&&(d.layer.enter(),d.layer.applyLeave=!1)):d.layer.applyLeave=!0,d.data.settings.timer?parseInt(e.parents(".ms_repeater").data("currentIndex"))===parseInt(d.currentIndex)&&(b.cancel(d.layer.layerTimerLeave),d.applyLAnimation(d,e)):(b.cancel(d.layer.layerTimerLeave),null!==d.layer.leaveDelay&&parseInt(e.parents(".ms_repeater").data("currentIndex"))===parseInt(d.currentIndex)&&(d.data.settings.editMode||(d.layer.layerTimerLeave=b(function(){d.layer.applyLeave=!1,b.cancel(d.layer.layerTimerLeave)},d.layer.leaveDelay))))},!0);var y=c.defer();c.all(i).then(function(){y.resolve(),e.parent().trigger(d.layer.typeChanged?"MPSLLayerChange":"MPSLLayerCreate")}),d.deferred.push(y.promise),d.data.settings.editMode&&d.$watchCollection("[layer.type, layer.src, layer.width, layer.height, layer.classes, layer.poster, layer.controls]",function(){h?h=!1:c.all(j).then(function(){e.parent().trigger("MPSLLayerChange"),j=[]})})}}}]),angular.module("motosliderApp").directive("msVimeoLayer",["defaults","$timeout","$q","$http",function(a,b,c){return{restrict:"A",link:function(d,e,f){var g,h,i=!0,j=[],k=[],l=c.defer(),m=!1,n=!1,o=!0,p=!0,q=d.layer.autoplay||d.data.settings.editMode;d.layer.default_preview_image=a.info.path+a.videoBackground,d.vimeoPlayerReady=l.promise,d.layer.typeChanged=d.layer.hasOwnProperty("typeChanged")&&d.layer.typeChanged,d.slideLeaved=!1,d.elementId="mpsl-layer-vimeo-"+d.$id,e[0].id=d.elementId;var r=e.parents("#ms_wrapper"),s=(r.outerHeight(),r.outerWidth(),e.find("iframe"));d.getVimeoEnterAnimationLayer=function(a){return a.animation},d.getVimeoLeaveAnimationLayer=function(a){return a.leaveAnimation},d.pixelerize=function(a){return parseInt(a)+"px"},d.layer.clArr=[],d.$watch("layer.classes",function(){if(d.data.settings.editMode){d.layer.classes&&d.layer.clArr.push(d.layer.classes),d.layer.clArr.forEach(function(a){e.removeClass(a)}),e.attr("style",""),e.addClass("ms_vimeo_layer"),d.layer.classes&&e.addClass(d.layer.classes),f.$set("positions",d.layer.position),e.css("opacity","1");var a=c.defer();d.setElementPosition(e,d.layer,a),k.push(a.promise)}});var t=c.defer();s.on("load",function(){t.resolve(),t=c.defer()});var u=t.promise;d.isThisSlideCurrent(e)&&q&&j.push(u),d.data.settings.editMode&&d.$watch("layer.src",function(){s.attr("src",d.getVimeoSrc(d.layer)),u=t.promise,k.push(u)}),d.$watch("layer.width",function(){if(d.data.settings.editMode){var a=d.factor>1?1:d.factor;e.css({width:d.layer.width*a}),f.$set("positions",d.layer.position),d.setPositions(e,d.calculationOfPosition(d.layer.position,e,e.parents("#"+d.getCurrentScope())))}}),d.$watch("layer.height",function(){if(d.data.settings.editMode){var a=d.factor>1?1:d.factor;e.css({height:d.layer.height*a}),f.$set("positions",d.layer.position),d.setPositions(e,d.calculationOfPosition(d.layer.position,e,e.parents("#"+d.getCurrentScope())))}}),d.$watch("layer.controls",function(){d.data.settings.editMode&&s.attr("src",d.getVimeoSrc(d.layer))}),d.$watch("layer.poster",function(){d.data.settings.editMode&&!i&&d.setPreviewImage()});var v=function(){m||(m=!0,s.attr("src",d.getVimeoSrc(d.layer)),q=!1)};d.setPreviewImage=function(){g=c.defer(),h=g.promise,d.layer.poster.length?(d.layer.preview_image=d.layer.poster,g.resolve()):d.layer.preview_image=d.layer.default_preview_image},d.clickPreviewButton=function(){o=m||!d.detectMobile,d.stopPlayingTimer(),v(),c.when(d.vimeoPlayerReady).then(function(){d.hidePreviewImage(),o&&w()})},d.hidePreviewImage=function(){var a=e.find(".ms_vimeo_layer_preview_image");a.addClass("hidden")},d.showPreviewImage=function(){var a=e.find(".ms_vimeo_layer_preview_image");a.removeClass("hidden")};var w=function(){x("play")};d.isPaused=function(){x("paused")},d.pauseVideo=function(a){angular.isUndefined(a)&&(a=!0),m&&c.when(d.vimeoPlayerReady).then(function(){x("pause"),a&&d.showPreviewImage()}),d.layer.autoplay&&n&&(p=!1)},d.seekTo=function(a){m&&c.when(d.vimeoPlayerReady).then(function(){x("seekTo",a)})},d.onLeaveSlide=function(){d.showPreviewImage()},d.currentTimer=d.data.settings.timer;var x=function(a,b){var c={method:a};b&&(c.value=b),s[0].contentWindow.postMessage(JSON.stringify(c),d.getVimeoSrc(d.layer))};d.onReady=function(){d.arrVimeoPlayersState[d.elementId]="ready",x("addEventListener","play"),x("addEventListener","pause"),x("addEventListener","finish"),d.layer.loop?x("setLoop",!0):x("setLoop",!1),d.layer.mute?x("setVolume",1e-4):x("setVolume",1),l.resolve()
},d.onPlay=function(){d.arrVimeoPlayersState[d.elementId]="play",d.data.settings.editMode||d.appliedPauses||d.stopPlayingTimer()},d.onPause=function(){d.arrVimeoPlayersState[d.elementId]="pause",d.data.settings.editMode||d.appliedPauses||!d.checkAllPlayers()||d.startPlayingTimer()},d.onFinish=function(){d.arrVimeoPlayersState[d.elementId]="finish",d.data.settings.editMode||d.appliedPauses||!d.checkAllPlayers()||d.startPlayingTimer()};var y=function(a){try{JSON.parse(a)}catch(b){return!1}return!0};d.onMessageReceived=function(a){if(y(a.data)){var b=JSON.parse(a.data);if(b.player_id===d.elementId)switch(b.event){case"ready":d.onReady();break;case"play":d.onPlay();break;case"pause":d.onPause();break;case"finish":d.onFinish()}}},d.data.settings.editMode||(window.addEventListener?window.addEventListener("message",d.onMessageReceived,!1):window.attachEvent("onmessage",d.onMessageReceived,!1)),d.data.settings.editMode||(d.animEndListener=function(){d.isThisSlideCurrent(e)&&d.layer.autoplay&&!n&&(c.when(d.vimeoPlayerReady).then(function(){p&&(d.hidePreviewImage(),w())}),n=!0)},angular.forEach(a.leaveEventNamesArr,function(a){e[0].addEventListener(a,d.animEndListener,!1)})),d.manipulate=function(a){var b=!1;a.hasOwnProperty("type")&&!angular.equals(d.layer.type,a.type)&&(d.layer.typeChanged=!0);for(var c in a)b||angular.equals(d.layer[c],a[c])||(b=!0),d.layer[c]=a[c];b?d.$apply():e.parent().trigger("MPSLLayerChange")},d.delete=function(a){d.data.slides[0].layers.splice(a.$index,1),d.$apply()},d.percentage=function(a){return parseInt(a)+"%"},d.delayValidation=function(a){return parseInt(a)+"ms"},d.getWidth=function(b){return angular.isUndefined(b.width)||0===b.width.length?a.widthVimeo:b.width},d.getHeight=function(b){return angular.isUndefined(b.height)||0===b.height.length?a.heightVimeo:b.height},d.getVimeoId=function(a){var b=a.toString().match(/^(?:https?:\/\/|)(?:www\.|player\.|)vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:\/|\?|\#\w*|)$/),c="";if(null===b){var d=a.toString().match(/^\d+$/);c=angular.isArray(d)&&angular.isDefined(d[0])?d[0]:""}else c=angular.isArray(b)&&angular.isDefined(b[1])?b[1]:"";return c},d.getVimeoSrc=function(a){var b=d.getVimeoId(a.src);return"https://player.vimeo.com/video/"+b+"?api=1&player_id="+d.elementId+"&badge=0&title=0&portrait=0&byline=0"},s.attr("frameborder",0),s.attr("webkitallowfullscreen",!0),s.attr("mozallowfullscreen",!0),s.attr("allowfullscreen",!0),d.setPreviewImage(),d.data.settings.editMode?e.css("opacity",1):(d.addLayerAnimation(d.layer,e),e.addClass(d.layer.classes),e.css({width:d.layer.width*d.factor,height:d.layer.height*d.factor}));var z={width:d.layer.width,height:d.layer.height,"padding-top":d.slice(e.css("padding-top")),"padding-right":d.slice(e.css("padding-right")),"padding-bottom":d.slice(e.css("padding-bottom")),"padding-left":d.slice(e.css("padding-left")),"border-top-width":d.slice(e.css("border-top-width")),"border-right-width":d.slice(e.css("border-right-width")),"border-left-width":d.slice(e.css("border-left-width")),"border-bottom-width":d.slice(e.css("border-bottom-width"))};f.$set("proportions",z),d.setProportions(e),f.$set("positions",d.layer.position);var A=c.defer();d.setElementPosition(e,d.layer,A),d.isThisSlideCurrent(e)&&j.push(A.promise);d.layer.leaveAnimation;d.$watch("currentIndex",function(){d.isThisSlideCurrent(e)?(q&&v(),d.data.settings.editMode||d.layer.autoplay&&!n&&d.stopPlayingTimer(),angular.isDefined(d.slideLeaved)&&d.slideLeaved&&(d.slideLeaved=!1)):d.slideLeaved||(d.onLeaveSlide(),d.slideLeaved=!0)}),d.$watch("[data.settings.timer, currentIndex]",function(){d.isThisSlideCurrent(e)?d.data.settings.editMode||d.layer.applyLeave&&(d.layer.enter(),d.layer.applyLeave=!1):d.layer.applyLeave=!0,d.data.settings.timer?parseInt(e.parents(".ms_repeater").data("currentIndex"))===parseInt(d.currentIndex)&&(b.cancel(d.layer.layerTimerLeave),d.applyLAnimation(d,e)):(b.cancel(d.layer.layerTimerLeave),null!==d.layer.leaveDelay&&parseInt(e.parents(".ms_repeater").data("currentIndex"))===parseInt(d.currentIndex)&&(d.data.settings.editMode||(d.layer.layerTimerLeave=b(function(){d.layer.applyLeave=!1,b.cancel(d.layer.layerTimerLeave)},d.layer.leaveDelay))))},!0);var B=c.defer();c.all(j).then(function(){B.resolve(),e.parent().trigger(d.layer.typeChanged?"MPSLLayerChange":"MPSLLayerCreate")}),d.deferred.push(B.promise),d.data.settings.editMode&&d.$watchCollection("[layer.type, layer.src, layer.width, layer.height, layer.classes, layer.poster]",function(){i?i=!1:c.all(k).then(function(){e.parent().trigger("MPSLLayerChange"),k=[]})})}}}]),angular.module("motosliderApp").directive("msHtmlLayer",["$sce","$timeout","$q","defaults",function(a,b,c){return{restrict:"A",link:function(d,e,f){var g=!0,h=[],i=[];d.$watch("layer.content",function(){d.data.settings.editMode&&d.trustHtmlContent(d.layer)}),d.layer.clArr=[],d.$watch("layer.classes",function(){if(d.data.settings.editMode){d.layer.clArr.push(d.layer.classes),d.layer.clArr.forEach(function(a){e.removeClass(a)}),e.attr("style",""),e.addClass("ms_html_layer "+d.layer.classes),f.$set("positions",d.layer.position),e.css("opacity","1");var a=c.defer();d.setElementPosition(e,d.layer,a),i.push(a.promise)}}),d.manipulate=function(a){var b=!1;for(var c in a)b||angular.equals(d.layer[c],a[c])||(b=!0),d.layer[c]=a[c];b?(d.trustHtmlContent(d.layer),d.$apply()):e.parent().trigger("MPSLLayerChange")},d.delete=function(a){d.data.slides[0].layers.splice(a.$index,1),d.$apply()},d.trustHtmlContent=function(b){"string"==typeof b.content&&(b.content=a.trustAsHtml(b.content))},d.trustHtmlContent(d.layer),e.addClass(d.layer.classes),d.data.settings.editMode?e.css({opacity:1}):d.addLayerAnimation(d.layer,e);var j={"font-size":d.slice(e.css("font-size")),"padding-top":d.slice(e.css("padding-top")),"padding-right":d.slice(e.css("padding-right")),"padding-bottom":d.slice(e.css("padding-bottom")),"padding-left":d.slice(e.css("padding-left")),"line-height":d.slice(e.css("line-height")),"border-top-width":d.slice(e.css("border-top-width")),"border-right-width":d.slice(e.css("border-right-width")),"border-left-width":d.slice(e.css("border-left-width")),"border-bottom-width":d.slice(e.css("border-bottom-width")),"letter-spacing":d.slice(e.css("letter-spacing"))};f.$set("proportions",j),d.setProportions(e),f.$set("positions",d.layer.position);var k=c.defer();d.setElementPosition(e,d.layer,k),h.push(k.promise),d.$watch("[data.settings.timer, currentIndex]",function(){parseInt(e.parents(".ms_repeater").data("currentIndex"))===parseInt(d.currentIndex)?d.data.settings.editMode||d.layer.applyLeave&&(d.layer.enter(),d.layer.applyLeave=!1):d.layer.applyLeave=!0,d.data.settings.timer?parseInt(e.parents(".ms_repeater").data("currentIndex"))===parseInt(d.currentIndex)&&(b.cancel(d.layer.layerTimerLeave),d.applyLAnimation(d,e)):(b.cancel(d.layer.layerTimerLeave),null!==d.layer.leaveDelay&&parseInt(e.parents(".ms_repeater").data("currentIndex"))===parseInt(d.currentIndex)&&(d.data.settings.editMode||(d.layer.layerTimerLeave=b(function(){d.layer.applyLeave=!1,b.cancel(d.layer.layerTimerLeave)},d.layer.leaveDelay))))},!0);var l=c.defer();c.all(h).then(function(){l.resolve(),e.parent().trigger("MPSLLayerCreate")}),d.deferred.push(l.promise),d.data.settings.editMode&&d.$watchCollection("[layer.content, layer.classes]",function(){g?g=!1:c.all(i).then(function(){e.parent().trigger("MPSLLayerChange"),i=[]})})}}}]),angular.module("motosliderApp").directive("msStartPause",["$timeout","$q",function(a){return{restrict:"A",link:function(b,c){b.setTimerSeconds(),angular.element(c).bind("click",function(){b.data.settings.isSlideshowEnabled=!0,b.data.settings.timer?(c.removeClass("ms_pause"),b.data.settings.timer=!1,b.tempTimerForVideo=!1,b.stopTimer(),a.cancel(b.motoTimer)):(b.data.settings.timer=!0,b.tempTimerForVideo=!0,c.addClass("ms_pause"),b.startTimer()),b.$apply()})}}}]),angular.module("motosliderApp").directive("msPaginationWrapper",["$timeout",function(){return{link:function(){}}}]),angular.module("motosliderApp").directive("msPagination",[function(){return{link:function(a,b,c){angular.element(b).bind("click",function(){parseInt(c.index)===parseInt(a.currentIndex)?(angular.element(b).addClass("ms_active"),angular.element(b).siblings().removeClass("ms_active")):angular.element(b).removeClass("ms_active")})}}}]),angular.module("motosliderApp").directive("msThumbnail",[function(){return{link:function(){}}}]),angular.module("motosliderApp").directive("msPrev",[function(){return{restrict:"A",link:function(a,b){angular.element(b).bind("click",function(){a.quickScroll=!1,MPSLManager.swiped=!1,a.prevSlide(!0),a.$apply()})}}}]),angular.module("motosliderApp").directive("msNext",[function(){return{restrict:"A",link:function(a,b){angular.element(b).bind("click",function(){a.quickScroll=!1,MPSLManager.swiped=!1,a.nextSlide(!0),a.$apply()})}}}]),angular.module("motosliderApp").directive("msSwipe",["$q","$swipe","defaults",function(a,b,c){return{restrict:"A",link:function(d,e){a.when(d.sliderLoaded).then(function(){var a,f,g,h=0;if(a=d.data.settings.swipe&&d.detectMobile?!0:!d.data.settings.swipe&&d.detectMobile?!0:d.data.settings.swipe&&!d.detectMobile?!0:!1,a&&!d.data.settings.editMode&&d.data.settings.countSlides>1){e.addClass("ms_grab"),e.on("mousedown",function(){angular.element(this).addClass("ms_grabbing")}),e.on("mouseup",function(){angular.element(this).removeClass("ms_grabbing")});var i,j=function(){var a=d.currentIndex,b=0==a?d.data.settings.countSlides-1:a-1,c=a==d.data.settings.countSlides-1?0:a+1,f={currentElement:e.find('[data-current-index="'+a+'"]'),prevElement:e.find('[data-current-index="'+b+'"]'),nextElement:e.find('[data-current-index="'+c+'"]')};return f.doubleSlide=b===c?!0:!1,f},k=function(a,b){a.css({"-webkit-transition-duration":d.ms(b),"-moz-transition-duration":d.ms(b),"-ms-transition-duration":d.ms(b),"transition-duration":d.ms(b)})},l=function(a,b){a.css({"-webkit-transform":"translate3D("+b+", 0, 0)","-moz-transform":"translate3D("+b+", 0, 0)","-ms-transform":"translate3D("+b+", 0, 0)"})},m=function(a,b){a.css({opacity:b})},n=function(a){a.css({"-webkit-transform":"matrix(1, 0, 0, 1, 0, 0)","-moz-transform":"matrix(1, 0, 0, 1, 0, 0)","-ms-transform":"matrix(1, 0, 0, 1, 0, 0)"})},o=function(){"msSlideFade"!==d.animationType&&(d.firstSlideEnded=!0,l(d.tempSlides.currentElement,d.percentage(-100)),k(d.tempSlides.currentElement,c.swipeTransitionDuration),l(d.tempSlides.nextElement,d.percentage(0)),k(d.tempSlides.nextElement,c.swipeTransitionDuration)),d.nextSlide(!0)},p=function(){"msSlideFade"!==d.animationType&&(d.firstSlideEnded=!0,l(d.tempSlides.currentElement,d.percentage(100)),k(d.tempSlides.currentElement,c.swipeTransitionDuration),l(d.tempSlides.prevElement,d.percentage(0)),k(d.tempSlides.prevElement,c.swipeTransitionDuration)),d.prevSlide(!0)},q=function(){MPSLManager.swiped=!0,d.quickScroll=!0,l(d.tempSlides.currentElement,d.percentage(0)),k(d.tempSlides.currentElement,c.swipeTransitionDuration)},r=function(){g?(l(d.tempSlides.nextElement,d.percentage(100)),k(d.tempSlides.nextElement,c.swipeTransitionDuration)):(l(d.tempSlides.prevElement,d.percentage(-100)),k(d.tempSlides.prevElement,c.swipeTransitionDuration))},s=function(a,b){if(d.enableSwipe=b.timeStamp-i>c.swipeTimeLimit||isNaN(i)?!0:!1,d.enableSwipe){i=b.timeStamp,h=a.x;var e=angular.element(b.target);d.quickScroll=!0,d.tempSlides=j(),d.animationType=d.tempSlides.currentElement.find(".ms_slide_wrapper").attr("enter-animation"),(e.hasClass("ms_next")||e.hasClass("ms_prev")||e.hasClass("ms_bullet"))&&v(),"msSlideFade"!==d.animationType&&(k(d.tempSlides.nextElement,0),d.tempSlides.doubleSlide||k(d.tempSlides.prevElement,0)),d.delta=0,d.startSwipeTime=b.timeStamp}},t=function(a){d.delta=h-a.x,d.enableSwipe&&"msSlideFade"!==d.animationType&&(f=-d.delta,(d.delta>5||d.delta<-5)&&(k(d.tempSlides.currentElement,0),l(d.tempSlides.currentElement,d.px(f))),d.swipeDifferenceX=a.x-h,d.delta>5?(g=!0,l(d.tempSlides.nextElement,d.px(d.currentWidth+f)),m(d.tempSlides.nextElement,1),d.tempSlides.doubleSlide||m(d.tempSlides.prevElement,0)):d.delta<-5?(g=!1,l(d.tempSlides.prevElement,d.px(-d.currentWidth+f)),m(d.tempSlides.prevElement,1),d.tempSlides.doubleSlide||m(d.tempSlides.nextElement,0)):d.delta<5&&d.delta>-5&&(m(d.tempSlides.nextElement,0),m(d.tempSlides.prevElement,0)))},u=function(a,b){if(d.enableSwipe){var e=b.timeStamp-d.startSwipeTime;"msSlideFade"!==d.animationType&&q();var f=d.currentWidth/c.swipeWidthLimit;"msSlideFade"!==d.animationType?d.delta>f?o():d.delta<-f?p():d.delta<f&&d.delta>-f&&0!==d.delta?e<c.swipeTime?(-1===Math.sign(d.delta)?p():o(),d.startSwipeTime=0):r():(v(),n(d.tempSlides.currentElement),k(d.tempSlides.currentElement,0),d.tempSlides.currentElement.addClass(c.animatedClass)):0!==d.delta&&(-1===Math.sign(d.delta)?p():o()),d.enableSwipe=!1}},v=function(){};b.bind(e,{start:s,move:t,end:u,cancel:v}),e.on("mouseleave",function(){d.enableSwipe&&"msSlideFade"!==d.animationType&&(d.enableSwipe=!1,q(),r(),e.removeClass("ms_grabbing"))})}})}}}]),angular.module("motosliderApp").animation(".ms_repeater",["$rootElement","defaults",function(a,b){var c="true"===a.find(".motoslider>#settings").attr("data-edit-mode"),d=function(a){var b=a.find(".ms_slide_wrapper");return{enter:b.attr("enter-animation"),leave:b.attr("leave-animation"),duration:b.attr("duration"),easing:b.attr("easing")}},e=function(a){var b=a.find("video");0!==b.length&&b.each(function(a,b){b.pause()})},f=function(a,b,c){a.find(b.join(",")).css("opacity",c)},g=function(a,b){"msSlideFade"===b.enter?(a.hasClass("ms_show")&&a.removeClass("ms_show"),a.css({"transition-property":"opacity","-webkit-transition-property":"opacity","-moz-transition-property":"opacity","-ms-transition-property":"opacity"}),a.css({"transition-duration":b.duration+"ms","-webkit-transition-duration":b.duration+"ms","-moz-transition-duration":b.duration+"ms","-ms-transition-duration":b.duration+"ms"})):a.css({"animation-duration":b.duration+"ms","-webkit-animation-duration":b.duration+"ms","-moz-animation-duration":b.duration+"ms","-ms-animation-duration":b.duration+"ms"}),a.addClass("mpsl-"+b.easing)};return{removeClass:function(a){if(!c){a.addClass("ms_active"),a.removeClass("ms_prev_slide"),a.addClass("ms_current_slide"),f(a,[".ms_layer"],0);var e=d(a);a.removeClass(b.animatedClass+" "+e.leave),a.find(".ms_image").addClass("ms_optimize"),MPSLManager.swiped||e&&(a.addClass(b.animatedClass).addClass(e.enter),g(a,e))}},addClass:function(a){if(!c){e(a),a.removeClass("ms_active"),f(a,[".ms_layer"],1),a.removeClass("ms_current_slide");var h=d(a);a.removeClass(h.enter),"msSlideFade"!==h.enter&&(a.siblings(".ms_slide").css("opacity",0),a.css("opacity",1)),MPSLManager.swiped||h&&(a.addClass(b.animatedClass).addClass(h.enter),g(a,h))}}}}]);